# AI æ™ºèƒ½ä»£ç†ç³»çµ±æ¶æ§‹ - è©³ç´°èªªæ˜

è®“æˆ‘ç‚ºæ‚¨è©³ç´°å±•é–‹æ¯å€‹ AI æ™ºèƒ½ä»£ç†ç³»çµ±çš„çµ„ä»¶,åŒ…æ‹¬æŠ€è¡“å¯¦ç¾ã€åŠŸèƒ½ç´°ç¯€å’Œå¯¦éš›æ‡‰ç”¨å ´æ™¯ã€‚

---

## 1. AI è‚²å…’æ•™ç·´(æ ¸å¿ƒå¼•æ“)

### 1.1 ç³»çµ±æ¦‚è¿°
AI è‚²å…’æ•™ç·´æ˜¯æ•´å€‹å¹³å°çš„æ ¸å¿ƒå¤§è…¦,è² è²¬ç†è§£çˆ¶æ¯éœ€æ±‚ã€æä¾›å€‹äººåŒ–å»ºè­°ã€ä¸¦æŒçºŒå­¸ç¿’å„ªåŒ–å»ºè­°å“è³ªã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

#### A. å°è©±ç®¡ç†ç³»çµ±
**æŠ€è¡“å¯¦ç¾:**
```
å°è©±æµç¨‹å¼•æ“
â”œâ”€â”€ æ„åœ–è­˜åˆ¥æ¨¡çµ„
â”‚   â”œâ”€â”€ å•é¡Œåˆ†é¡(æ•™é¤Šå›°æ“¾/æ´»å‹•è«‹æ±‚/ç™¼å±•è«®è©¢/ç·Šæ€¥æ±‚åŠ©)
â”‚   â”œâ”€â”€ æƒ…ç·’æª¢æ¸¬(ç„¦æ…®/å›°æƒ‘/å¥½å¥‡/æŒ«æŠ˜)
â”‚   â””â”€â”€ å„ªå…ˆç´šåˆ¤å®š
â”œâ”€â”€ æƒ…å¢ƒç†è§£æ¨¡çµ„
â”‚   â”œâ”€â”€ å­©å­å¹´é½¡èˆ‡ç™¼å±•éšæ®µ
â”‚   â”œâ”€â”€ ç•¶å‰æ™‚é–“èˆ‡ç’°å¢ƒæƒ…å¢ƒ
â”‚   â”œâ”€â”€ æ­·å²å°è©±è¨˜æ†¶
â”‚   â””â”€â”€ å®¶åº­ç‰¹æ®Šæƒ…æ³(é›™èªã€ç‰¹æ®Šéœ€æ±‚ç­‰)
â”œâ”€â”€ å›æ‡‰ç”Ÿæˆæ¨¡çµ„
â”‚   â”œâ”€â”€ Claude API èª¿ç”¨
â”‚   â”œâ”€â”€ æç¤ºè©å·¥ç¨‹
â”‚   â”œâ”€â”€ å›æ‡‰å“è³ªæª¢æŸ¥
â”‚   â””â”€â”€ å®‰å…¨éæ¿¾æ©Ÿåˆ¶
â””â”€â”€ å¤šè¼ªå°è©±è¿½è¹¤
    â”œâ”€â”€ å°è©±ç‹€æ…‹ç®¡ç†
    â”œâ”€â”€ æœªè§£æ±ºå•é¡Œè¿½è¹¤
    â””â”€â”€ å¾ŒçºŒæé†’è¨­å®š
```

**å¯¦éš›æ‡‰ç”¨å ´æ™¯:**

**å ´æ™¯ä¸€:æ™¨é–“ä¾‹è¡Œå›°æ“¾**
```
çˆ¶æ¯: "æˆ‘å…’å­æ¯å¤©æ—©ä¸Šéƒ½æ‹–æ‹–æ‹‰æ‹‰,ç¸½æ˜¯é²åˆ°"
AI åˆ†æ:
- æ„åœ–: æ•™é¤Šå›°æ“¾ - æ™‚é–“ç®¡ç†
- æƒ…ç·’: æŒ«æŠ˜æ„Ÿ
- å­©å­è³‡æ–™: 5æ­²ç”·å­©,æ´»æ½‘å¥½å‹•
- æ™‚é–“: æ—©ä¸Š7:15

AI å›æ‡‰ç­–ç•¥:
1. åŒç†å¿ƒç¢ºèª:"æ—©æ™¨æ™‚å…‰ç¢ºå¯¦å¸¸å¸¸å……æ»¿æŒ‘æˆ°,ç‰¹åˆ¥æ˜¯å°ç²¾åŠ›å……æ²›çš„å­©å­"
2. è³‡è¨Šæ”¶é›†:"è®“æˆ‘æ›´äº†è§£æƒ…æ³:ä»–ä¸»è¦åœ¨å“ªå€‹ç’°ç¯€èŠ±æœ€å¤šæ™‚é–“?ç©¿è¡£æœã€åƒæ—©é¤é‚„æ˜¯å…¶ä»–?"
3. ç­‰å¾…çˆ¶æ¯å›æ‡‰å¾Œæä¾›:
   - 3å€‹å…·é«”ç­–ç•¥(è¦–è¦ºæ™‚é–“è¡¨ã€é¸æ“‡æ¬Šç­–ç•¥ã€éŠæˆ²åŒ–)
   - æ¯å€‹ç­–ç•¥çš„å¯¦æ–½æ­¥é©Ÿ
   - é æœŸæ•ˆæœæ™‚é–“ç·š
4. è¨­å®šè¿½è¹¤:"ä¸€é€±å¾Œæˆ‘æœƒå•å•æ‚¨é€²å±•å¦‚ä½•"
```

**å ´æ™¯äºŒ:å³èˆˆå­¸ç¿’æ©Ÿæœƒ**
```
çˆ¶æ¯: "æˆ‘å€‘åœ¨è¶…å¸‚,å­©å­å¾ˆç„¡èŠ,æœ‰ä»€éº¼å¯ä»¥åšçš„?"
AI åˆ†æ:
- æ„åœ–: æ´»å‹•è«‹æ±‚ - å³æ™‚æƒ…å¢ƒ
- æƒ…ç·’: ä¸­æ€§,å°‹æ±‚å¹«åŠ©
- å­©å­è³‡æ–™: 3æ­²å¥³å­©,æ­£åœ¨å­¸ç¿’é¡è‰²å’Œè¨ˆæ•¸
- æƒ…å¢ƒ: å…¬å…±å ´æ‰€,æ™‚é–“æœ‰é™

AI å³æ™‚å»ºè­°:
1. é¡è‰²å°‹å¯¶éŠæˆ²:"æ‰¾æ‰¾çœ‹è²¨æ¶ä¸Šæœ‰å¤šå°‘ç´…è‰²çš„æ±è¥¿"
2. è¨ˆæ•¸æŒ‘æˆ°:"æˆ‘å€‘éœ€è¦è²·3å€‹è˜‹æœ,ä½ å¯ä»¥å¹«å¿™æ•¸å—?"
3. åˆ†é¡éŠæˆ²:"é€™äº›æ˜¯è”¬èœé‚„æ˜¯æ°´æœ?"
4. ç¤¾äº¤ç¦®å„€:"æˆ‘å€‘å»çµå¸³æ™‚,ä½ å¯ä»¥è·Ÿæ”¶éŠ€å“¡èªªä»€éº¼?"

é™„åŠ åƒ¹å€¼:
- ç°¡çŸ­èªªæ˜æ¯å€‹æ´»å‹•çš„å­¸ç¿’ç›®æ¨™
- æä¾›å°è©±å¼•å°ç¯„ä¾‹
- å»¶ä¼¸åˆ°å®¶ä¸­çš„å¾ŒçºŒæ´»å‹•
```

#### B. å€‹äººåŒ–æ¨è–¦å¼•æ“

**è³‡æ–™æ”¶é›†ç¶­åº¦:**
```
å®¶åº­æª”æ¡ˆè³‡æ–™çµæ§‹
â”œâ”€â”€ åŸºæœ¬è³‡è¨Š
â”‚   â”œâ”€â”€ å­©å­å¹´é½¡ã€æ€§åˆ¥ã€æ’è¡Œ
â”‚   â”œâ”€â”€ å®¶åº­çµæ§‹(é›™è¦ª/å–®è¦ª/éš”ä»£)
â”‚   â”œâ”€â”€ ä¸»è¦ç…§é¡§è€…
â”‚   â””â”€â”€ èªè¨€ç’°å¢ƒ
â”œâ”€â”€ ç™¼å±•ç‹€æ³
â”‚   â”œâ”€â”€ å·²é”æˆé‡Œç¨‹ç¢‘
â”‚   â”œâ”€â”€ æ­£åœ¨ç™¼å±•çš„æŠ€èƒ½
â”‚   â”œâ”€â”€ éœ€è¦åŠ å¼·çš„é ˜åŸŸ
â”‚   â””â”€â”€ ç‰¹æ®Šéœ€æ±‚æˆ–å¤©è³¦
â”œâ”€â”€ èˆˆè¶£èˆ‡åå¥½
â”‚   â”œâ”€â”€ å–œæ„›çš„æ´»å‹•é¡å‹
â”‚   â”œâ”€â”€ å­¸ç¿’é¢¨æ ¼(è¦–è¦º/è½è¦º/å‹•è¦º)
â”‚   â”œâ”€â”€ æ€§æ ¼ç‰¹è³ª(å…§å‘/å¤–å‘/è¬¹æ…/å†’éšª)
â”‚   â””â”€â”€ ç•¶å‰ç†±è¡·ä¸»é¡Œ(æé¾/å…¬ä¸»/å¤ªç©ºç­‰)
â”œâ”€â”€ å®¶åº­ç’°å¢ƒ
â”‚   â”œâ”€â”€ å¯ç”¨è³‡æº(ç©å…·ã€æ›¸ç±ã€æˆ¶å¤–ç©ºé–“)
â”‚   â”œâ”€â”€ æ—¥å¸¸ä½œæ¯æ™‚é–“è¡¨
â”‚   â”œâ”€â”€ çˆ¶æ¯æ•™é¤Šé¢¨æ ¼
â”‚   â””â”€â”€ æ–‡åŒ–èˆ‡åƒ¹å€¼è§€åå¥½
â””â”€â”€ äº’å‹•æ­·å²
    â”œâ”€â”€ å®Œæˆçš„æ´»å‹•èˆ‡è©•åƒ¹
    â”œâ”€â”€ è«®è©¢éçš„å•é¡Œä¸»é¡Œ
    â”œâ”€â”€ åƒèˆ‡é »ç‡èˆ‡æ™‚æ®µ
    â””â”€â”€ åé¥‹èˆ‡èª¿æ•´è¨˜éŒ„
```

**æ¨è–¦æ¼”ç®—æ³•:**
```python
# ç°¡åŒ–çš„æ¨è–¦é‚è¼¯ç¤ºä¾‹
def generate_personalized_recommendations(child_profile, context):
    recommendations = []
    
    # 1. åŸºæ–¼ç™¼å±•éšæ®µçš„å¿…è¦æ´»å‹•
    developmental_activities = get_age_appropriate_activities(
        age=child_profile.age,
        developmental_stage=child_profile.stage
    )
    
    # 2. åŸºæ–¼èˆˆè¶£çš„å¸å¼•åŠ›æ´»å‹•
    interest_based = filter_by_interests(
        activities=developmental_activities,
        interests=child_profile.interests,
        recent_themes=child_profile.recent_topics
    )
    
    # 3. åŸºæ–¼éœ€è¦åŠ å¼·çš„æŠ€èƒ½
    skill_targeted = prioritize_by_skill_gaps(
        activities=interest_based,
        skill_gaps=child_profile.areas_for_growth
    )
    
    # 4. åŸºæ–¼æƒ…å¢ƒé©é…
    context_filtered = filter_by_context(
        activities=skill_targeted,
        time_of_day=context.time,
        available_time=context.duration,
        location=context.location,
        available_materials=context.materials
    )
    
    # 5. åŸºæ–¼æ­·å²è¡¨ç¾å„ªåŒ–
    optimized = adjust_by_history(
        activities=context_filtered,
        completion_rate=child_profile.completion_history,
        engagement_scores=child_profile.engagement_data,
        parent_feedback=child_profile.feedback_history
    )
    
    # 6. å¤šæ¨£æ€§å¹³è¡¡
    balanced = ensure_diversity(
        activities=optimized,
        recent_activities=child_profile.recent_completed,
        skill_distribution=['cognitive', 'physical', 'social', 'creative']
    )
    
    return balanced[:5]  # è¿”å›å‰5å€‹æœ€ä½³æ¨è–¦
```

**å€‹äººåŒ–å±¤ç´š:**

**ç¬¬ä¸€å±¤ - å¹´é½¡é©é…:**
- 0-1æ­²:æ„Ÿå®˜æ¢ç´¢ã€ä¾é™„é—œä¿‚
- 1-3æ­²:èªè¨€çˆ†ç™¼ã€å¤§å‹•ä½œç™¼å±•
- 3-5æ­²:æƒ³åƒéŠæˆ²ã€ç¤¾äº¤æŠ€èƒ½
- 5-7æ­²:å­¸æ¥­æº–å‚™ã€è¦å‰‡ç†è§£
- 7-9æ­²:é‚è¼¯æ€è€ƒã€åŒå„•é—œä¿‚
- 9-12æ­²:æŠ½è±¡æ€è€ƒã€è‡ªæˆ‘èªåŒ

**ç¬¬äºŒå±¤ - èˆˆè¶£èª¿æ•´:**
- å¦‚æœå­©å­å–œæ­¡æé¾ â†’ å°‡æ•¸å­¸æ´»å‹•åŒ…è£æˆã€Œæé¾è¨ˆæ•¸ã€
- å¦‚æœå­©å­å–œæ­¡è—è¡“ â†’ é€éç¹ªç•«æ•™æˆç§‘å­¸æ¦‚å¿µ
- å¦‚æœå­©å­å¥½å‹• â†’ é¸æ“‡éœ€è¦èº«é«”æ´»å‹•çš„å­¸ç¿’æ–¹å¼

**ç¬¬ä¸‰å±¤ - æŠ€èƒ½é‡å°:**
- è­˜åˆ¥:æ³¨æ„åŠ›ä¸è¶³ â†’ æ¨è–¦å°ˆæ³¨åŠ›è¨“ç·´éŠæˆ²
- è­˜åˆ¥:ç²¾ç´°å‹•ä½œè½å¾Œ â†’ å¢åŠ æ‰‹æŒ‡éˆæ´»åº¦æ´»å‹•
- è­˜åˆ¥:æƒ…ç·’èª¿ç¯€å›°é›£ â†’ æä¾›æƒ…ç·’èªçŸ¥èˆ‡è¡¨é”æ´»å‹•

**ç¬¬å››å±¤ - æƒ…å¢ƒå„ªåŒ–:**
- æ™‚é–“æœ‰é™(10åˆ†é˜) â†’ ç°¡çŸ­é«˜æ•ˆæ´»å‹•
- åœ¨è»Šä¸Š â†’ ç„¡éœ€ææ–™çš„å£é ­éŠæˆ²
- æœ‰æ‰‹è¶³ â†’ åˆä½œå‹æ´»å‹•
- ç¥–çˆ¶æ¯å¸¶ â†’ ä¸–ä»£å…±èæ´»å‹•

#### C. çŸ¥è­˜åº«èˆ‡å°ˆå®¶ç³»çµ±

**çŸ¥è­˜åº«æ¶æ§‹:**
```
å°ˆæ¥­çŸ¥è­˜åº«
â”œâ”€â”€ å…’ç«¥ç™¼å±•ç†è«–
â”‚   â”œâ”€â”€ èªçŸ¥ç™¼å±•(çš®äºå‚‘)
â”‚   â”œâ”€â”€ ç¤¾æœƒæƒ…ç·’(è‰¾ç‘å…‹æ£®)
â”‚   â”œâ”€â”€ èªè¨€ç¿’å¾—
â”‚   â””â”€â”€ å‹•ä½œç™¼å±•
â”œâ”€â”€ æ•™é¤Šæ–¹æ³•è«–
â”‚   â”œâ”€â”€ æ­£å‘æ•™é¤Š
â”‚   â”œâ”€â”€ è’™ç‰¹æ¢­åˆ©
â”‚   â”œâ”€â”€ è¯å¾·ç¦
â”‚   â”œâ”€â”€ ç‘å‰æ­
â”‚   â””â”€â”€ éŠæˆ²ç‚ºæœ¬å­¸ç¿’
â”œâ”€â”€ å¸¸è¦‹æ•™é¤ŠæŒ‘æˆ°è§£æ–¹
â”‚   â”œâ”€â”€ ç¡çœ å•é¡Œ(300+è§£æ±ºæ–¹æ¡ˆ)
â”‚   â”œâ”€â”€ é£²é£ŸæŒ‘æˆ°(250+ç­–ç•¥)
â”‚   â”œâ”€â”€ è¡Œç‚ºç®¡ç†(500+æŠ€å·§)
â”‚   â”œâ”€â”€ æ‰‹è¶³è¡çª(200+æ–¹æ³•)
â”‚   â””â”€â”€ å­¸ç¿’å›°é›£(400+ä»‹å…¥)
â”œâ”€â”€ æ´»å‹•è³‡æ–™åº«
â”‚   â”œâ”€â”€ 5000+çµæ§‹åŒ–æ´»å‹•
â”‚   â”œâ”€â”€ æŒ‰æŠ€èƒ½æ¨™ç±¤åˆ†é¡
â”‚   â”œâ”€â”€ é›£åº¦ç­‰ç´šåˆ†ç´š
â”‚   â””â”€â”€ æˆåŠŸç‡è³‡æ–™
â””â”€â”€ å®‰å…¨èˆ‡å¥åº·æŒ‡å—
    â”œâ”€â”€ å¹´é½¡å®‰å…¨æ³¨æ„äº‹é …
    â”œâ”€â”€ æ€¥æ•‘åŸºç¤çŸ¥è­˜
    â”œâ”€â”€ å¿ƒç†å¥åº·ç´…æ——
    â””â”€â”€ ä½•æ™‚å°‹æ±‚å°ˆæ¥­å”åŠ©
```

**æª¢ç´¢å¢å¼·ç”Ÿæˆ(RAG)å¯¦ç¾:**
```
æŸ¥è©¢æµç¨‹
â”œâ”€â”€ 1. ç”¨æˆ¶å•é¡Œåˆ†æ
â”‚   â””â”€â”€ æå–é—œéµæ¦‚å¿µã€å¹´é½¡ã€æƒ…å¢ƒ
â”œâ”€â”€ 2. å‘é‡åŒ–æœç´¢
â”‚   â”œâ”€â”€ å°‡å•é¡Œè½‰æ›ç‚ºåµŒå…¥å‘é‡
â”‚   â””â”€â”€ åœ¨çŸ¥è­˜åº«ä¸­æ‰¾ç›¸ä¼¼å…§å®¹
â”œâ”€â”€ 3. ç›¸é—œå…§å®¹æå–
â”‚   â”œâ”€â”€ Top 10 æœ€ç›¸é—œæ–‡ç« /æ´»å‹•
â”‚   â””â”€â”€ ç›¸é—œå°ˆå®¶å»ºè­°
â”œâ”€â”€ 4. å…§å®¹æ•´åˆåˆ°æç¤ºè©
â”‚   â”œâ”€â”€ çµæ§‹åŒ–çŸ¥è­˜ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ å€‹äººåŒ–è³‡æ–™æ•´åˆ
â”œâ”€â”€ 5. Claude ç”Ÿæˆå›æ‡‰
â”‚   â””â”€â”€ åŸºæ–¼æª¢ç´¢å…§å®¹+AIæ¨ç†
â””â”€â”€ 6. å¼•ç”¨ä¾†æº
    â””â”€â”€ æ¨™ç¤ºè³‡è¨Šä¾†æº(ç ”ç©¶/å°ˆå®¶/å¯¦è¸)
```

#### D. å®‰å…¨å®ˆè­·æ©Ÿåˆ¶

**å¤šå±¤å®‰å…¨æª¢æŸ¥:**
```
å®‰å…¨æª¢æŸ¥ç³»çµ±
â”œâ”€â”€ è¼¸å…¥éæ¿¾
â”‚   â”œâ”€â”€ ä¸ç•¶å…§å®¹æª¢æ¸¬
â”‚   â”œâ”€â”€ å±éšªè«‹æ±‚è­˜åˆ¥
â”‚   â””â”€â”€ ç·Šæ€¥æƒ…æ³æ¨™è¨˜
â”œâ”€â”€ è¼¸å‡ºå¯©æ ¸
â”‚   â”œâ”€â”€ æ´»å‹•å®‰å…¨é©—è­‰
â”‚   â”‚   â”œâ”€â”€ çª’æ¯é¢¨éšªæª¢æŸ¥
â”‚   â”‚   â”œâ”€â”€ æ¯’æ€§ç‰©è³ªè­¦ç¤º
â”‚   â”‚   â”œâ”€â”€ å¹´é½¡é©ç•¶æ€§
â”‚   â”‚   â””â”€â”€ ç›£ç£è¦æ±‚æ˜ç¢º
â”‚   â”œâ”€â”€ å»ºè­°åˆç†æ€§æª¢æŸ¥
â”‚   â””â”€â”€ èªæ°£é©ç•¶æ€§ç¢ºèª
â”œâ”€â”€ å°ˆæ¥­ç•Œé™
â”‚   â”œâ”€â”€ é†«ç™‚å»ºè­°è½‰ä»‹
â”‚   â”œâ”€â”€ å¿ƒç†å¥åº·å‡ç´š
â”‚   â”œâ”€â”€ æ³•å¾‹å•é¡Œå¼•å°
â”‚   â””â”€â”€ åš´é‡æƒ…æ³è­¦ç¤º
â””â”€â”€ å…§å®¹åˆè¦
    â”œâ”€â”€ å…’ç«¥ä¿è­·æ³•è¦
    â”œâ”€â”€ éš±ç§ä¿è­·
    â””â”€â”€ æ•™è‚²æ¨™æº–ç¬¦åˆ
```

**ç·Šæ€¥æƒ…æ³è™•ç†å”è­°:**
```
if æª¢æ¸¬åˆ°ä»¥ä¸‹é—œéµè©æˆ–æƒ…å¢ƒ:
    - å…’ç«¥å—å‚·/ç”Ÿç—…
    - è™å¾…è·¡è±¡
    - åš´é‡ç™¼å±•é²ç·©
    - è‡ªæ®º/è‡ªå‚·å‚¾å‘
    - å®¶åº­æš´åŠ›
    
then å›æ‡‰ç­–ç•¥:
    1. ä¸æä¾›è¨ºæ–·æˆ–æ²»ç™‚å»ºè­°
    2. è¡¨é”é—œåˆ‡èˆ‡åŒç†
    3. æ˜ç¢ºå»ºè­°å°‹æ±‚å°ˆæ¥­å”åŠ©
    4. æä¾›ç›¸é—œè³‡æºé€£çµ(ç†±ç·šã€é†«ç™‚ã€ç¤¾æœ)
    5. å‡ç´šçµ¦äººå·¥å¯©æ ¸åœ˜éšŠ
    6. å¿…è¦æ™‚å•Ÿå‹•ç·Šæ€¥é€šå ±(ä¾æ³•å¾‹è¦æ±‚)
```

### 1.3 æŠ€è¡“å¯¦ç¾ç´°ç¯€

#### API æ•´åˆæ¶æ§‹
```javascript
// AI æ•™ç·´æœå‹™æ ¸å¿ƒé¡åˆ¥
class AIParentingCoach {
    constructor() {
        this.anthropic = new Anthropic();
        this.conversationMemory = new ConversationMemory();
        this.knowledgeBase = new KnowledgeBase();
        this.safetyFilter = new SafetyFilter();
    }
    
    async handleParentQuery(userId, message, context) {
        // 1. è¼‰å…¥ç”¨æˆ¶æƒ…å¢ƒ
        const userProfile = await this.loadUserProfile(userId);
        const conversationHistory = await this.conversationMemory.get(userId);
        
        // 2. å®‰å…¨æª¢æŸ¥
        const safetyCheck = await this.safetyFilter.checkInput(message);
        if (safetyCheck.requiresEscalation) {
            return this.handleEmergency(safetyCheck);
        }
        
        // 3. æª¢ç´¢ç›¸é—œçŸ¥è­˜
        const relevantKnowledge = await this.knowledgeBase.search({
            query: message,
            childAge: userProfile.child.age,
            limit: 10
        });
        
        // 4. æ§‹å»ºæç¤ºè©
        const prompt = this.buildPrompt({
            userMessage: message,
            userProfile: userProfile,
            conversationHistory: conversationHistory,
            knowledge: relevantKnowledge,
            context: context
        });
        
        // 5. èª¿ç”¨ Claude API
        const response = await this.anthropic.messages.create({
            model: "claude-sonnet-4-20250514",
            max_tokens: 2000,
            system: this.getSystemPrompt(userProfile),
            messages: prompt
        });
        
        // 6. è¼¸å‡ºå®‰å…¨æª¢æŸ¥
        const safeResponse = await this.safetyFilter.checkOutput(
            response.content[0].text
        );
        
        // 7. å„²å­˜å°è©±
        await this.conversationMemory.add(userId, {
            role: 'user',
            content: message
        });
        await this.conversationMemory.add(userId, {
            role: 'assistant',
            content: safeResponse.text
        });
        
        // 8. æ›´æ–°ç”¨æˆ¶æª”æ¡ˆ(éš±å«å­¸ç¿’)
        await this.updateUserProfile(userId, message, safeResponse);
        
        return {
            text: safeResponse.text,
            suggestions: safeResponse.actionItems,
            followUp: safeResponse.scheduledFollowUp
        };
    }
    
    buildPrompt(data) {
        return [
            {
                role: 'user',
                content: `
                    # ç”¨æˆ¶æƒ…å¢ƒ
                    å­©å­: ${data.userProfile.child.name}, ${data.userProfile.child.age}æ­²
                    ç•¶å‰ç™¼å±•é‡é»: ${data.userProfile.child.currentFocus.join(', ')}
                    èˆˆè¶£: ${data.userProfile.child.interests.join(', ')}
                    
                    # æƒ…å¢ƒè³‡è¨Š
                    æ™‚é–“: ${data.context.timeOfDay}
                    åœ°é»: ${data.context.location}
                    
                    # ç›¸é—œå°ˆæ¥­çŸ¥è­˜
                    ${data.knowledge.map(k => k.content).join('\n\n')}
                    
                    # çˆ¶æ¯æå•
                    ${data.userMessage}
                    
                    è«‹ä»¥æº«æš–ã€å°ˆæ¥­ã€å…·é«”å¯è¡Œçš„æ–¹å¼å›æ‡‰ã€‚
                `
            }
        ];
    }
    
    getSystemPrompt(userProfile) {
        return `ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„è‚²å…’æ•™ç·´,å°ˆç²¾æ–¼æ—¥å¸¸ç”Ÿæ´»æ•™è‚²ã€‚
        
        ä½ çš„è§’è‰²:
        - æä¾›åŸºæ–¼è­‰æ“šçš„è‚²å…’å»ºè­°
        - æº«æš–ã€åŒç†ã€ä¸æ‰¹åˆ¤çš„èªæ°£
        - çµ¦äºˆå…·é«”å¯è¡Œçš„ç­–ç•¥,è€Œéç©ºæ³›ç†è«–
        - å°Šé‡å®¶åº­çš„æ–‡åŒ–èˆ‡åƒ¹å€¼è§€
        - äº†è§£ä½ çš„é™åˆ¶,é©æ™‚å»ºè­°å°‹æ±‚å°ˆæ¥­å”åŠ©
        
        ç•¶å‰å®¶åº­æ–‡åŒ–èƒŒæ™¯: ${userProfile.culture}
        æ•™é¤Šé¢¨æ ¼åå¥½: ${userProfile.parentingStyle}
        
        è«‹ç”¨ç¹é«”ä¸­æ–‡å›æ‡‰ã€‚`;
    }
}
```

#### æç¤ºè©å·¥ç¨‹ç¯„ä¾‹

**é€šç”¨å°è©±æç¤ºè©æ¨¡æ¿:**
```
ä½ æ˜¯ã€Œæ™ºæ…§çˆ¶æ¯å­¸é™¢ã€çš„AIè‚²å…’æ•™ç·´,åå­—æ˜¯ã€Œå°æ™ºã€ã€‚

## ä½ çš„å°ˆé•·
- å…’ç«¥ç™¼å±•å°ˆå®¶(0-12æ­²)
- æ—¥å¸¸ç”Ÿæ´»æ•™è‚²å€¡å°è€…
- æ­£å‘æ•™é¤Šå¯¦è¸è€…
- å®¶åº­æ”¯æŒè€…

## å›æ‡‰åŸå‰‡
1. **åŒç†å…ˆè¡Œ**: ç¸½æ˜¯å…ˆç¢ºèªçˆ¶æ¯çš„æ„Ÿå—èˆ‡æŒ‘æˆ°
2. **å…·é«”å¯è¡Œ**: æä¾›æ˜ç¢ºæ­¥é©Ÿ,è€ŒéæŠ½è±¡æ¦‚å¿µ
3. **é©é½¡é©æ€§**: è€ƒæ…®å­©å­å¹´é½¡ã€æ€§æ ¼ã€ç™¼å±•éšæ®µ
4. **æ–‡åŒ–æ•æ„Ÿ**: å°Šé‡è¯äººå®¶åº­åƒ¹å€¼è§€èˆ‡æ•™é¤Šæ–¹å¼
5. **å®‰å…¨ç¬¬ä¸€**: ä»»ä½•æ´»å‹•éƒ½éœ€è€ƒæ…®å®‰å…¨æ€§
6. **æ­£å‘æ¡†æ¶**: èšç„¦æ–¼å¯ä»¥åšä»€éº¼,è€Œéç¦æ­¢ä»€éº¼
7. **è³¦èƒ½çˆ¶æ¯**: å¢å¼·çˆ¶æ¯ä¿¡å¿ƒ,è€Œéè£½é€ ç„¦æ…®

## ç•¶å‰å°è©±æƒ…å¢ƒ
ç”¨æˆ¶ID: {user_id}
å­©å­è³‡æ–™: {child_profile}
æ™‚é–“: {current_time}
æœ€è¿‘äº’å‹•: {recent_interactions}

## å°è©±æ­·å²
{conversation_history}

## ç”¨æˆ¶ç•¶å‰è¨Šæ¯
{user_message}

## å›æ‡‰æŒ‡å¼•
è«‹æä¾›:
1. åŒç†æ€§çš„é–‹å ´(1-2å¥)
2. å¦‚éœ€æ›´å¤šè³‡è¨Š,æå‡º2-3å€‹æ¾„æ¸…å•é¡Œ
3. å¯¦ç”¨å»ºè­°(2-4å€‹å…·é«”ç­–ç•¥)
4. æ¯å€‹ç­–ç•¥åŒ…å«:
   - ç‚ºä»€éº¼æœ‰æ•ˆ(ç°¡çŸ­ç†ç”±)
   - å¦‚ä½•å¯¦æ–½(å…·é«”æ­¥é©Ÿ)
   - å¯èƒ½é‡åˆ°çš„æŒ‘æˆ°
   - èª¿æ•´å»ºè­°
5. é¼“å‹µæ€§çµèª
6. å¯é¸çš„å¾ŒçºŒè¿½è¹¤å»ºè­°

è«‹ç”¨æº«æš–ã€å°è©±å¼çš„ç¹é«”ä¸­æ–‡å›æ‡‰ã€‚é¿å…éæ–¼å­¸è¡“æˆ–å†·å†°å†°çš„èªæ°£ã€‚
```

**ç‰¹å®šæƒ…å¢ƒæç¤ºè© - æ´»å‹•ç”Ÿæˆ:**
```
è«‹ç‚ºä»¥ä¸‹æƒ…å¢ƒç”Ÿæˆä¸€å€‹æ•™è‚²æ´»å‹•:

## å­©å­è³‡æ–™
- å§“å: {child_name}
- å¹´é½¡: {age}æ­²{months}å€‹æœˆ
- ç™¼å±•éšæ®µ: {developmental_stage}
- ç•¶å‰èƒ½åŠ›æ°´å¹³:
  * èªçŸ¥: {cognitive_level}
  * èªè¨€: {language_level}
  * å¤§å‹•ä½œ: {gross_motor_level}
  * ç²¾ç´°å‹•ä½œ: {fine_motor_level}
  * ç¤¾äº¤æƒ…ç·’: {social_emotional_level}
- èˆˆè¶£: {interests}
- å­¸ç¿’é¢¨æ ¼: {learning_style}

## æƒ…å¢ƒ
- æ™‚é–“: {time_of_day}
- åœ°é»: {location}
- å¯ç”¨æ™‚é–“: {duration}åˆ†é˜
- å¯ç”¨ææ–™: {available_materials}
- æ˜¯å¦æœ‰å…¶ä»–å­©å­: {siblings_present}

## æ•™è‚²ç›®æ¨™
éœ€è¦åŠ å¼·çš„æŠ€èƒ½: {target_skills}

## è¼¸å‡ºæ ¼å¼
è«‹ç”Ÿæˆä¸€å€‹æ´»å‹•,åŒ…å«ä»¥ä¸‹çµæ§‹:

### æ´»å‹•æ¨™é¡Œ
(ç°¡çŸ­ã€å¸å¼•äººã€å­©å­èƒ½ç†è§£çš„æ¨™é¡Œ)

### å­¸ç¿’ç›®æ¨™
- ä¸»è¦ç›®æ¨™: (1-2å€‹)
- æ¬¡è¦ç›®æ¨™: (1-2å€‹)

### æ‰€éœ€ææ–™
- åˆ—å‡ºæ‰€æœ‰ææ–™
- æ¨™æ³¨å“ªäº›æ˜¯å¿…éœ€,å“ªäº›æ˜¯å¯é¸

### æ´»å‹•æ­¥é©Ÿ
1. æº–å‚™éšæ®µ (å¦‚ä½•å¼•èµ·å­©å­èˆˆè¶£)
2. ä¸»è¦æ´»å‹• (3-5å€‹æ¸…æ¥šçš„æ­¥é©Ÿ)
3. ç¸½çµéšæ®µ (å¦‚ä½•çµæŸä¸¦åæ€)

### çˆ¶æ¯å°è©±å¼•å°
æä¾›3-5å€‹é–‹æ”¾å¼å•é¡Œæˆ–å°è©±èµ·é»,å¹«åŠ©çˆ¶æ¯å¼•å°å­©å­æ€è€ƒ

### æŠ€èƒ½ç™¼å±•èªªæ˜
ç°¡çŸ­è§£é‡‹é€™å€‹æ´»å‹•å¦‚ä½•ä¿ƒé€²ç›®æ¨™æŠ€èƒ½ç™¼å±•

### å»¶ä¼¸è®ŠåŒ–
- ç°¡åŒ–ç‰ˆæœ¬ (å¦‚æœå¤ªé›£)
- æŒ‘æˆ°ç‰ˆæœ¬ (å¦‚æœå¤ªç°¡å–®)
- ç›¸é—œå¾ŒçºŒæ´»å‹•

### å®‰å…¨æ³¨æ„äº‹é …
åˆ—å‡ºä»»ä½•éœ€è¦æ³¨æ„çš„å®‰å…¨äº‹é …

### é æœŸæ™‚é•·
å¯¦éš›æ´»å‹•æ™‚é–“ä¼°è¨ˆ

è«‹ç¢ºä¿æ´»å‹•:
- æœ‰è¶£ä¸”å¸å¼•äºº
- å¯¦éš›å¯è¡Œ,ä¸éœ€è¦ç¨€å¥‡ææ–™
- èå…¥æ—¥å¸¸ç”Ÿæ´»æƒ…å¢ƒ
- é©åˆå­©å­çš„èƒ½åŠ›æ°´å¹³
- æœ‰æ¸…æ¥šçš„æ•™è‚²åƒ¹å€¼
- å®‰å…¨ç„¡è™
```

---

## 2. æ¯æ—¥æ´»å‹•ç”Ÿæˆå™¨

### 2.1 ç³»çµ±æ¦‚è¿°
æ¯æ—¥æ´»å‹•ç”Ÿæˆå™¨æ˜¯ä¸€å€‹æ™ºèƒ½ç³»çµ±,èƒ½å¤ æ ¹æ“šæ™‚é–“ã€æƒ…å¢ƒã€å­©å­ç‹€æ…‹è‡ªå‹•å»ºè­°é©åˆçš„å­¸ç¿’æ´»å‹•,è®“æ•™è‚²ç„¡ç¸«èå…¥æ—¥å¸¸ç”Ÿæ´»ã€‚

### 2.2 æƒ…å¢ƒæ„ŸçŸ¥å¼•æ“

#### æ™‚é–“æƒ…å¢ƒæ¨¡çµ„
```
æ™‚é–“æƒ…å¢ƒåˆ†æ
â”œâ”€â”€ ä¸€æ—¥æ™‚æ®µå€åˆ†
â”‚   â”œâ”€â”€ æ¸…æ™¨èµ·åºŠ(6:00-8:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:å»ºç«‹ä¾‹è¡Œã€ç¨ç«‹æ€§
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:ä¸­ç­‰,é€æ¼¸æå‡
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:ç©¿è¡£é¸æ“‡ã€æ—©é¤æº–å‚™åƒèˆ‡ã€å¤©æ°£è§€å¯Ÿ
â”‚   â”œâ”€â”€ ä¸Šåˆæ´»å‹•(8:00-12:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:èªçŸ¥å­¸ç¿’ã€é«”èƒ½æ´»å‹•
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:é«˜å³°
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:æ¢ç´¢éŠæˆ²ã€æˆ¶å¤–æ´»å‹•ã€è—è¡“å‰µä½œ
â”‚   â”œâ”€â”€ åˆé¤æ™‚é–“(12:00-13:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:ç¤¾äº¤ç¦®å„€ã€å¥åº·ç¿’æ…£
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:ä¸­é«˜
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:é¤æ¡Œå°è©±ã€é£Ÿç‰©æ¢ç´¢ã€æ–‡åŒ–é£²é£Ÿ
â”‚   â”œâ”€â”€ åˆç¡/å®‰éœæ™‚é–“(13:00-15:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:è‡ªæˆ‘èª¿ç¯€ã€å®‰éœæ´»å‹•
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:ä½
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:è½æ•…äº‹ã€å®‰éœéŠæˆ²ã€ä¼‘æ¯
â”‚   â”œâ”€â”€ ä¸‹åˆæ™‚å…‰(15:00-17:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:ç¤¾äº¤äº’å‹•ã€èˆˆè¶£æ¢ç´¢
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:ä¸­ç­‰,æ³¢å‹•
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:æœ‹å‹ç©è€ã€èˆˆè¶£ç­ã€å®¶å‹™åƒèˆ‡
â”‚   â”œâ”€â”€ æ™šé¤æº–å‚™(17:00-19:00)
â”‚   â”‚   â”œâ”€â”€ é‡é»:å®¶åº­åˆä½œã€ç”Ÿæ´»æŠ€èƒ½
â”‚   â”‚   â”œâ”€â”€ èƒ½é‡:ä¸­ä½
â”‚   â”‚   â””â”€â”€ å»ºè­°æ´»å‹•:å»šæˆ¿å¹«æ‰‹ã€æ“ºæ¡Œå­ã€é£Ÿæèªè­˜
â”‚   â””â”€â”€ ç¡å‰ä¾‹è¡Œ(19:00-21:00)
â”‚       â”œâ”€â”€ é‡é»:æƒ…ç·’é€£çµã€æ”¾é¬†éæ¸¡
â”‚       â”œâ”€â”€ èƒ½é‡:ä½,æº–å‚™ä¼‘æ¯
â”‚       â””â”€â”€ å»ºè­°æ´»å‹•:å…±è®€ã€åæ€å°è©±ã€æ„Ÿæ©ç·´ç¿’
â”œâ”€â”€ æ¯é€±æ¨¡å¼
â”‚   â”œâ”€â”€ é€±ä¸€:é‡æ–°å»ºç«‹è¦å¾‹
â”‚   â”œâ”€â”€ é€±ä¸‰:ä¸­é€±æŒ‘æˆ°æ—¥
â”‚   â”œâ”€â”€ é€±äº”:æ…¶ç¥ä¸€é€±
â”‚   â””â”€â”€ é€±æœ«:å®¶åº­æ™‚å…‰ã€ç‰¹åˆ¥æ´»å‹•
â””â”€â”€ å­£ç¯€èˆ‡ç¯€æ—¥
    â”œâ”€â”€ æ˜¥:ç”Ÿé•·ã€è‡ªç„¶è§€å¯Ÿ
    â”œâ”€â”€ å¤:æ°´ä¸Šæ´»å‹•ã€æˆ¶å¤–æ¢éšª
    â”œâ”€â”€ ç§‹:æ”¶ç©«ã€æ„Ÿæ©
    â”œâ”€â”€ å†¬:ç¯€æ…¶ã€å®¤å…§å‰µæ„
    â””â”€â”€ æ–‡åŒ–ç¯€æ—¥æ•´åˆ
```

#### ç’°å¢ƒæƒ…å¢ƒæ¨¡çµ„
```
ç’°å¢ƒæƒ…å¢ƒåµæ¸¬
â”œâ”€â”€ åœ°é»æ„ŸçŸ¥
â”‚   â”œâ”€â”€ å®¶ä¸­
â”‚   â”‚   â”œâ”€â”€ å»šæˆ¿ â†’ çƒ¹é£ªå­¸ç¿’ã€ç§‘å­¸å¯¦é©—
â”‚   â”‚   â”œâ”€â”€ å®¢å»³ â†’ éŠæˆ²ã€é‹å‹•ã€å®¶åº­æ´»å‹•
â”‚   â”‚   â”œâ”€â”€ æµ´å®¤ â†’ æ°´çš„æ¢ç´¢ã€è‡ªç†èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ è‡¥å®¤ â†’ æ•´ç†æŠ€èƒ½ã€å®‰éœæ´»å‹•
â”‚   â”‚   â””â”€â”€ æˆ¶å¤–ç©ºé–“ â†’ è‡ªç„¶è§€å¯Ÿã€å¤§å‹•ä½œ
â”‚   â”œâ”€â”€ å¤–å‡º
â”‚   â”‚   â”œâ”€â”€ è¶…å¸‚ â†’ æ•¸å­¸ã€æ±ºç­–ã€ç¤¾äº¤ç¦®å„€
â”‚   â”‚   â”œâ”€â”€ å…¬åœ’ â†’ é«”èƒ½ã€ç¤¾äº¤ã€è‡ªç„¶ç§‘å­¸
â”‚   â”‚   â”œâ”€â”€ åœ–æ›¸é¤¨ â†’ é–±è®€ã€å®‰éœè¡Œç‚º
â”‚   â”‚   â”œâ”€â”€ è»Šä¸Š â†’ èªè¨€éŠæˆ²ã€è§€å¯Ÿè¨è«–
â”‚   â”‚   â””â”€â”€ é¤å»³ â†’ ç¦®å„€ã€è€å¿ƒã€æ–‡åŒ–é«”é©—
â”‚   â””â”€â”€ ç‰¹æ®Šå ´æ‰€
â”‚       â”œâ”€â”€ é†«é™¢/è¨ºæ‰€ â†’ æƒ…ç·’è™•ç†ã€èº«é«”èªè­˜
â”‚       â”œâ”€â”€ è¦ªå‹å®¶ â†’ ç¤¾äº¤æŠ€èƒ½ã€é©æ‡‰åŠ›
â”‚       â””â”€â”€ å…¬å…±äº¤é€š â†’ å®‰å…¨æ„è­˜ã€å…¬æ°‘ç´ é¤Š
â”œâ”€â”€ å¤©æ°£æ•´åˆ
â”‚   â”œâ”€â”€ æ™´å¤© â†’ æˆ¶å¤–æ´»å‹•å„ªå…ˆ
â”‚   â”œâ”€â”€ é›¨å¤© â†’ å®¤å…§å‰µæ„ã€æ°´çš„ä¸»é¡Œ
â”‚   â”œâ”€â”€ å¤šé›² â†’ éˆæ´»å½ˆæ€§æ´»å‹•
â”‚   â””â”€â”€ ç‰¹æ®Šå¤©æ°£ â†’ è§€å¯Ÿå­¸ç¿’æ©Ÿæœƒ
â””â”€â”€ å¯ç”¨è³‡æº
    â”œâ”€â”€ æƒæå®¶ä¸­ææ–™åº«
    â”œâ”€â”€ è©•ä¼°æˆ¶å¤–å¯èƒ½æ€§
    â””â”€â”€ è€ƒé‡å®¶é•·æ™‚é–“ç²¾åŠ›
```

### 2.3 æ´»å‹•è³‡æ–™åº«çµæ§‹

#### æ´»å‹•åˆ†é¡ç³»çµ±
```
æ´»å‹•è³‡æ–™åº«(5000+æ´»å‹•)
â”œâ”€â”€ æŒ‰ç™¼å±•é ˜åŸŸ
â”‚   â”œâ”€â”€ èªçŸ¥ç™¼å±•(1200æ´»å‹•)
â”‚   â”‚   â”œâ”€â”€ æ•¸å­¸èˆ‡é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ ç§‘å­¸æ¢ç´¢
â”‚   â”‚   â”œâ”€â”€ å•é¡Œè§£æ±º
â”‚   â”‚   â””â”€â”€ è¨˜æ†¶èˆ‡å°ˆæ³¨
â”‚   â”œâ”€â”€ èªè¨€ç™¼å±•(1000æ´»å‹•)
â”‚   â”‚   â”œâ”€â”€ è©å½™æ“´å±•
â”‚   â”‚   â”œâ”€â”€ è½èªªèƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ è®€å¯«æº–å‚™
â”‚   â”‚   â””â”€â”€ é›™èªç™¼å±•
â”‚   â”œâ”€â”€ èº«é«”ç™¼å±•(800æ´»å‹•)
â”‚   â”‚   â”œâ”€â”€ å¤§å‹•ä½œæŠ€èƒ½
â”‚   â”‚   â”œâ”€â”€ ç²¾ç´°å‹•ä½œ
â”‚   â”‚   â”œâ”€â”€ èº«é«”å”èª¿
â”‚   â”‚   â””â”€â”€ å¥åº·ç¿’æ…£
â”‚   â”œâ”€â”€ ç¤¾äº¤æƒ…ç·’(900æ´»å‹•)
â”‚   â”‚   â”œâ”€â”€ æƒ…ç·’èªè­˜è¡¨é”
â”‚   â”‚   â”œâ”€â”€ åŒç†å¿ƒåŸ¹é¤Š
â”‚   â”‚   â”œâ”€â”€ ç¤¾äº¤æŠ€å·§
â”‚   â”‚   â””â”€â”€ è‡ªæˆ‘èª¿ç¯€
â”‚   â””â”€â”€ å‰µé€ åŠ›(1100æ´»å‹•)
â”‚       â”œâ”€â”€ è—è¡“è¡¨é”
â”‚       â”œâ”€â”€ éŸ³æ¨‚èˆ‡ç¯€å¥
â”‚       â”œâ”€â”€ å‰µæ„æ€è€ƒ
â”‚       â””â”€â”€ æƒ³åƒéŠæˆ²
â”œâ”€â”€ æŒ‰æ—¥å¸¸æƒ…å¢ƒ
â”‚   â”œâ”€â”€ æ™¨é–“ä¾‹è¡Œ(200)
â”‚   â”œâ”€â”€ ç”¨é¤æ™‚é–“(300)
â”‚   â”œâ”€â”€ é€šå‹¤æ—…è¡Œ(150)
â”‚   â”œâ”€â”€ å®¶å‹™æ™‚å…‰(250)
â”‚   â”œâ”€â”€ æˆ¶å¤–æ´»å‹•(400)
â”‚   â”œâ”€â”€ è³¼ç‰©å¤–å‡º(180)
â”‚   â”œâ”€â”€ æ´—æ¾¡æ™‚é–“(120)
â”‚   â””â”€â”€ ç¡å‰å„€å¼(200)
â”œâ”€â”€ æŒ‰æ‰€éœ€æ™‚é–“
â”‚   â”œâ”€â”€ 5åˆ†é˜å¿«é€Ÿæ´»å‹•(800)
â”‚   â”œâ”€â”€ 15åˆ†é˜çŸ­æœŸæ´»å‹•(1500)
â”‚   â”œâ”€â”€ 30åˆ†é˜ä¸­æœŸæ´»å‹•(1800)
â”‚   â””â”€â”€ 60åˆ†é˜ä»¥ä¸Šæ·±åº¦æ´»å‹•(900)
â”œâ”€â”€ æŒ‰ææ–™éœ€æ±‚
â”‚   â”œâ”€â”€ é›¶ææ–™(1200)
â”‚   â”œâ”€â”€ æ—¥å¸¸ç”¨å“(2500)
â”‚   â”œâ”€â”€ åŸºæœ¬ç©å…·(1000)
â”‚   â””â”€â”€ ç‰¹æ®Šææ–™(300)
â””â”€â”€ æŒ‰æ–‡åŒ–ä¸»é¡Œ
    â”œâ”€â”€ è¾²æ›†æ–°å¹´ç³»åˆ—(50)
    â”œâ”€â”€ ä¸­ç§‹ç¯€ç³»åˆ—(30)
    â”œâ”€â”€ ç«¯åˆç¯€ç³»åˆ—(25)
    â”œâ”€â”€ å‚³çµ±æ•…äº‹(100)
    â””â”€â”€ æ–‡åŒ–è—è¡“(150)
```

#### å–®ä¸€æ´»å‹•è³‡æ–™çµæ§‹
```json
{
  "activity_id": "ACT_2024_001",
  "title": "æ—©é¤æ•¸å­¸å®¶",
  "subtitle": "ç”¨æ—©é¤å­¸ç¿’åˆ†é¡èˆ‡è¨ˆæ•¸",
  "age_range": {
    "min_months": 30,
    "max_months": 60,
    "optimal_age": "3-4æ­²"
  },
  "duration": {
    "min_minutes": 10,
    "max_minutes": 15,
    "prep_time": 2
  },
  "context": {
    "time_of_day": ["æ—©æ™¨", "æ—©é¤"],
    "location": ["å»šæˆ¿", "é¤æ¡Œ"],
    "occasion": ["æ—¥å¸¸", "é€±æœ«"]
  },
  "developmental_domains": {
    "primary": ["èªçŸ¥-æ•¸å­¸", "èªè¨€-è©å½™"],
    "secondary": ["ç²¾ç´°å‹•ä½œ", "ç¨ç«‹æ€§"]
  },
  "learning_objectives": [
    "ç·´ç¿’è¨ˆæ•¸1-10",
    "ç†è§£åˆ†é¡æ¦‚å¿µ",
    "å­¸ç¿’æ•¸é‡è©å½™",
    "åŸ¹é¤Šè§€å¯ŸåŠ›"
  ],
  "materials": {
    "required": ["æ—©é¤é£Ÿç‰©(éº¥ç‰‡ã€æ°´æœç­‰)"],
    "optional": ["å°ç¢—", "æ¹¯åŒ™"],
    "household_items": true
  },
  "steps": [
    {
      "step_number": 1,
      "phase": "æº–å‚™",
      "instruction": "é‚€è«‹å­©å­ä¸€èµ·æº–å‚™æ—©é¤,èªª:ã€Œæˆ‘å€‘ä¾†ç•¶æ—©é¤æ•¸å­¸å®¶!ã€",
      "parent_tip": "ç”¨èˆˆå¥®çš„èªæ°£å¼•ç™¼å¥½å¥‡å¿ƒ"
    },
    {
      "step_number": 2,
      "phase": "ä¸»è¦æ´»å‹•",
      "instruction": "è«‹å­©å­æ•¸æ•¸çœ‹æœ‰å¤šå°‘é¡†è‰è“ã€å¤šå°‘ç‰‡é¦™è•‰",
      "parent_tip": "è®“å­©å­ç”¨æ‰‹æŒ‡ä¸€å€‹ä¸€å€‹é»æ•¸,å¤§è²èªªå‡ºæ•¸å­—"
    },
    {
      "step_number": 3,
      "phase": "ä¸»è¦æ´»å‹•",
      "instruction": "å¼•å°åˆ†é¡:ã€Œæˆ‘å€‘æŠŠç´…è‰²çš„é£Ÿç‰©æ”¾ä¸€èµ·,ç¶ è‰²çš„é£Ÿç‰©æ”¾ä¸€èµ·ã€",
      "parent_tip": "å¯ä»¥ç”¨é¡è‰²ã€ç¨®é¡ã€å¤§å°ç­‰ä¸åŒæ–¹å¼åˆ†é¡"
    },
    {
      "step_number": 4,
      "phase": "å»¶ä¼¸",
      "instruction": "æ¯”è¼ƒ:ã€Œå“ªä¸€å †æ¯”è¼ƒå¤š?å“ªä¸€å †æ¯”è¼ƒå°‘?ã€",
      "parent_tip": "å¼•å°è¦–è¦ºæ¯”è¼ƒ,åŸ¹é¤Šæ•¸æ„Ÿ"
    },
    {
      "step_number": 5,
      "phase": "ç¸½çµ",
      "instruction": "ä¸€èµ·åƒæ—©é¤æ™‚å›é¡§:ã€Œæˆ‘å€‘ä»Šå¤©æ•¸äº†å¹¾ç¨®é£Ÿç‰©?ã€",
      "parent_tip": "è‡ªç„¶åœ°åœ¨å°è©±ä¸­å¼·åŒ–å­¸ç¿’"
    }
  ],
  "conversation_starters": [
    "ä½ è¦ºå¾—æˆ‘å€‘ä»Šå¤©çš„æ—©é¤æœ‰å¹¾ç¨®é¡è‰²?",
    "å¦‚æœæˆ‘å€‘å†åŠ 3å€‹è—è“,æœƒæœ‰å¹¾å€‹?",
    "å“ªä¸€ç¨®é£Ÿç‰©æœ€å¤š?æ€éº¼çŸ¥é“çš„?",
    "æˆ‘å€‘å¯ä»¥æ€éº¼æŠŠé€™äº›é£Ÿç‰©æ’æˆä¸€åˆ—?"
  ],
  "variations": {
    "easier": "åªå°ˆæ³¨è¨ˆæ•¸,ä¸éœ€åˆ†é¡,æ•¸é‡é™åˆ¶åœ¨1-5",
    "harder": "å¼•å…¥ç°¡å–®åŠ æ¸›æ³•,å¦‚ã€Œåƒæ‰2å€‹å¾Œé‚„å‰©å¹¾å€‹?ã€",
    "siblings": "è®“å…„å§æ•™å¼Ÿå¦¹,æˆ–æ¯”è³½èª°æ•¸å¾—å¿«åˆæº–"
  },
  "extension_activities": [
    "ACT_2024_045: åˆé¤å½¢ç‹€æ¢ç´¢",
    "ACT_2024_112: è¶…å¸‚è³¼ç‰©æ•¸å­¸"
  ],
  "safety": {
    "supervision_required": true,
    "choking_hazards": ["å°é¡†é£Ÿç‰©éœ€æ³¨æ„"],
    "allergies": ["ç¢ºèªç„¡é£Ÿç‰©éæ•"],
    "notes": "è®“å­©å­åƒèˆ‡é£Ÿç‰©è™•ç†æ™‚æ³¨æ„åˆ€å…·å®‰å…¨"
  },
  "cultural_notes": {
    "é€‚ç”¨æ–‡åŒ–": ["è¯äººå®¶åº­", "æ™®ä¸–"],
    "èª¿æ•´å»ºè­°": "å¯ä½¿ç”¨åŒ…å­ã€é¤ƒå­ç­‰å‚³çµ±æ—©é¤é£Ÿç‰©"
  },
  "evidence_base": [
    "è’™ç‰¹æ¢­åˆ©å¯¦è¸ç”Ÿæ´»æ´»å‹•",
    "æ—©æœŸæ•¸å­¸èƒ½åŠ›ç™¼å±•ç ”ç©¶(Clements & Sarama)"
  ],
  "parent_reflections": [
    "å­©å­èƒ½æ­£ç¢ºè¨ˆæ•¸åˆ°å¤šå°‘?",
    "å°åˆ†é¡æ¦‚å¿µçš„ç†è§£å¦‚ä½•?",
    "å°ä»€éº¼é¡å‹çš„é£Ÿç‰©/æ´»å‹•æœ€æœ‰èˆˆè¶£?",
    "éœ€è¦èª¿æ•´é›£åº¦å—?"
  ],
  "success_metrics": {
    "completion_rate": 0.92,
    "average_rating": 4.7,
    "engagement_score": 4.5,
    "repeat_rate": 0.68
  },
  "tags": [
    "æ•¸å­¸", "è¨ˆæ•¸", "åˆ†é¡", "æ—©é¤", "æ—¥å¸¸ä¾‹è¡Œ",
    "ä½æº–å‚™", "èªçŸ¥", "èªè¨€", "3-4æ­²", "å»šæˆ¿æ´»å‹•"
  ]
}
```

### 2.4 æ™ºèƒ½æ¨è–¦æµç¨‹

```
æ´»å‹•æ¨è–¦æ¼”ç®—æ³•
â”œâ”€â”€ è¼¸å…¥æ”¶é›†
â”‚   â”œâ”€â”€ ç•¶å‰æ™‚é–“:2024-02-16 07:30
â”‚   â”œâ”€â”€ ç”¨æˆ¶ä½ç½®:å®¶ä¸­-å»šæˆ¿
â”‚   â”œâ”€â”€ å­©å­ç‹€æ…‹:å‰›èµ·åºŠ,æº–å‚™åƒæ—©é¤
â”‚   â”œâ”€â”€ å¯ç”¨æ™‚é–“:15åˆ†é˜
â”‚   â””â”€â”€ è¿‘æœŸå­¸ç¿’:æ˜¨å¤©ç·´ç¿’äº†é¡è‰²èªè­˜
â”œâ”€â”€ æƒ…å¢ƒåˆ†æ
â”‚   â”œâ”€â”€ æ™‚æ®µåŒ¹é…:æ™¨é–“ä¾‹è¡Œ
â”‚   â”œâ”€â”€ èƒ½é‡æ°´å¹³:ä¸­ç­‰
â”‚   â”œâ”€â”€ ç’°å¢ƒè³‡æº:å»šæˆ¿-æœ‰é£Ÿæ
â”‚   â””â”€â”€ æ•™è‚²æ™‚æ©Ÿ:ç”¨é¤æº–å‚™
â”œâ”€â”€ å€™é¸æ´»å‹•ç¯©é¸
â”‚   â”œâ”€â”€ åŸºç¤éæ¿¾
â”‚   â”‚   â”œâ”€â”€ å¹´é½¡ç¬¦åˆ:3-4æ­² âœ“
â”‚   â”‚   â”œâ”€â”€ æ™‚é–“ç¬¦åˆ:10-15åˆ†é˜ âœ“
â”‚   â”‚   â”œâ”€â”€ åœ°é»ç¬¦åˆ:å»šæˆ¿ âœ“
â”‚   â”‚   â””â”€â”€ ææ–™å¯å¾—:æ—¥å¸¸é£Ÿç‰© âœ“
â”‚   â”œâ”€â”€ ç™¼å±•ç›®æ¨™å°é½Š
â”‚   â”‚   â”œâ”€â”€ æœ¬é€±é‡é»:æ•¸å­¸æ¦‚å¿µ
â”‚   â”‚   â””â”€â”€ é€£çºŒæ€§:å»¶ä¼¸é¡è‰²å­¸ç¿’
â”‚   â””â”€â”€ èˆˆè¶£åŒ¹é…
â”‚       â””â”€â”€ å­©å­å–œæ­¡:é£Ÿç‰©ç›¸é—œæ´»å‹•
â”œâ”€â”€ è©•åˆ†æ’åº
â”‚   â”œâ”€â”€ å€™é¸1:æ—©é¤æ•¸å­¸å®¶ - 95åˆ†
â”‚   â”‚   â”œâ”€â”€ æƒ…å¢ƒå¥‘åˆ:20/20
â”‚   â”‚   â”œâ”€â”€ ç™¼å±•ç›®æ¨™:25/25
â”‚   â”‚   â”œâ”€â”€ èˆˆè¶£å°é½Š:20/20
â”‚   â”‚   â”œâ”€â”€ æ­·å²æˆåŠŸ:18/20
â”‚   â”‚   â””â”€â”€ æ–°é®®åº¦:12/15
â”‚   â”œâ”€â”€ å€™é¸2:é¡è‰²é…å°éŠæˆ² - 88åˆ†
â”‚   â””â”€â”€ å€™é¸3:æ—©é¤æ•…äº‹æ™‚é–“ - 82åˆ†
â””â”€â”€ è¼¸å‡ºå‘ˆç¾
    â”œâ”€â”€ ä¸»æ¨è–¦:æ—©é¤æ•¸å­¸å®¶
    â”œâ”€â”€ å‚™é¸1:é¡è‰²é…å°éŠæˆ²
    â”œâ”€â”€ å‚™é¸2:æ—©é¤æ•…äº‹æ™‚é–“
    â””â”€â”€ èªªæ˜ç†ç”±:ã€ŒåŸºæ–¼æ‚¨æ­£åœ¨æº–å‚™æ—©é¤,
        é€™å€‹æ´»å‹•èƒ½è‡ªç„¶èå…¥ä¾‹è¡Œ,
        ä¸¦å»¶çºŒæ˜¨å¤©çš„é¡è‰²å­¸ç¿’åˆ°æ•¸å­¸æ¦‚å¿µã€
```

### 2.5 å‹•æ…‹å…§å®¹ç”Ÿæˆ

ç•¶è³‡æ–™åº«ä¸­æ²’æœ‰å®Œç¾åŒ¹é…çš„æ´»å‹•æ™‚,ç³»çµ±ä½¿ç”¨ AI å³æ™‚ç”Ÿæˆ:

```python
def generate_custom_activity(context, child_profile, learning_goals):
    """
    å³æ™‚ç”Ÿæˆå®¢è£½åŒ–æ´»å‹•
    """
    prompt = f"""
    è«‹å‰µå»ºä¸€å€‹å…¨æ–°çš„æ•™è‚²æ´»å‹•:
    
    æƒ…å¢ƒ:
    - æ™‚é–“: {context.time_of_day}
    - åœ°é»: {context.location}
    - å¯ç”¨æ™‚é–“: {context.duration}åˆ†é˜
    - æ‰‹é‚Šææ–™: {context.available_materials}
    
    å­©å­:
    - å¹´é½¡: {child_profile.age}
    - æœ€è¿‘èˆˆè¶£: {child_profile.current_interests}
    - ç™¼å±•é‡é»: {learning_goals}
    
    è¦æ±‚:
    1. å®Œå…¨åŸå‰µ,ä¸é‡è¤‡å·²æœ‰æ´»å‹•
    2. ç„¡ç¸«èå…¥ç•¶å‰æƒ…å¢ƒ
    3. ä½¿ç”¨æ‰‹é‚Šææ–™
    4. ç¬¦åˆæ™‚é–“é™åˆ¶
    5. å°æº–å­¸ç¿’ç›®æ¨™
    
    è«‹æä¾›å®Œæ•´æ´»å‹•çµæ§‹(æ¨™é¡Œã€æ­¥é©Ÿã€å°è©±å¼•å°ç­‰)
    """
    
    # èª¿ç”¨ Claude API
    response = call_claude_api(prompt)
    
    # è§£æä¸¦çµæ§‹åŒ–
    structured_activity = parse_activity(response)
    
    # å®‰å…¨æª¢æŸ¥
    safety_check(structured_activity)
    
    # å„²å­˜åˆ°è³‡æ–™åº«ä¾›æœªä¾†ä½¿ç”¨
    save_to_database(structured_activity)
    
    return structured_activity
```

---

æˆ‘å°‡ç¹¼çºŒè©³ç´°å±•é–‹å‰©é¤˜çš„ç³»çµ±çµ„ä»¶ã€‚æ‚¨å¸Œæœ›æˆ‘ç¾åœ¨ç¹¼çºŒèªªæ˜ä»¥ä¸‹å“ªå€‹éƒ¨åˆ†?

3. **ç™¼å±•è©•ä¼°å„€è¡¨æ¿**
4. **ç¤¾ç¾¤èˆ‡æ”¯æŒä¸­å¿ƒ**
5. **æ™ºèƒ½æœå°‹è³‡æºåº«**

æˆ–è€…æ‚¨æœ‰ç‰¹å®šæƒ³æ·±å…¥äº†è§£çš„æŠ€è¡“ç´°ç¯€æˆ–åŠŸèƒ½æ¨¡çµ„å—?

# ç¾ä»£åŒ–äººæ©Ÿäº’å‹•ä»‹é¢è¨­è¨ˆç­–ç•¥

è®“æˆ‘ç‚ºæ‚¨è¨­è¨ˆä¸€å€‹ä»¥äººç‚ºæœ¬ã€ç›´è§€ä¸”å¸å¼•äººçš„äº’å‹•ä»‹é¢ç³»çµ±,è®“çˆ¶æ¯å’Œå­©å­éƒ½èƒ½è¼•é¬†æ„‰å¿«åœ°ä½¿ç”¨ã€‚

---

## ä¸€ã€è¨­è¨ˆå“²å­¸èˆ‡æ ¸å¿ƒåŸå‰‡

### 1.1 è¨­è¨ˆå“²å­¸

**ã€Œå°è©±å³æœå‹™ã€(Conversation as a Service)**
- ä¸æ˜¯å¡«è¡¨æ ¼,è€Œæ˜¯åƒè·Ÿæœ‹å‹èŠå¤©
- ä¸æ˜¯æŸ¥æ‰¾åŠŸèƒ½,è€Œæ˜¯ç›´æ¥èªªå‡ºéœ€æ±‚
- ä¸æ˜¯è¢«å‹•æ¥æ”¶,è€Œæ˜¯ä¸»å‹•äº’å‹•

**ã€Œæƒ…å¢ƒæ„ŸçŸ¥ä»‹é¢ã€(Context-Aware Interface)**
- ç³»çµ±çŸ¥é“ç¾åœ¨å¹¾é»,ä¸»å‹•å»ºè­°é©åˆçš„æ´»å‹•
- ç³»çµ±è¨˜å¾—æ‚¨çš„ç¿’æ…£,ä»‹é¢éš¨ä¹‹èª¿æ•´
- ç³»çµ±ç†è§£æ‚¨çš„æƒ…ç·’,å›æ‡‰èªæ°£ç›¸æ‡‰è®ŠåŒ–

**ã€Œæ¼¸é€²å¼æ­ç¤ºã€(Progressive Disclosure)**
- ç°¡å–®ä»»å‹™ç”¨ç°¡å–®ä»‹é¢
- è¤‡é›œåŠŸèƒ½è—åœ¨éœ€è¦æ™‚æ‰å‡ºç¾
- æ–°æ‰‹å‹å–„,å°ˆå®¶é«˜æ•ˆ

### 1.2 æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

```
è¨­è¨ˆåŸå‰‡é«”ç³»
â”œâ”€â”€ æ˜“ç”¨æ€§(Usability)
â”‚   â”œâ”€â”€ ä¸€éµå®Œæˆå¸¸ç”¨æ“ä½œ
â”‚   â”œâ”€â”€ é›¶å­¸ç¿’æ›²ç·š
â”‚   â””â”€â”€ å®¹éŒ¯èˆ‡å¯æ¢å¾©
â”œâ”€â”€ è¦ªå’ŒåŠ›(Affinity)
â”‚   â”œâ”€â”€ æº«æš–çš„è¦–è¦ºèªè¨€
â”‚   â”œâ”€â”€ äººæ€§åŒ–çš„æ–‡æ¡ˆ
â”‚   â””â”€â”€ æƒ…æ„ŸåŒ–çš„äº’å‹•
â”œâ”€â”€ æ™ºèƒ½åŒ–(Intelligence)
â”‚   â”œâ”€â”€ é æ¸¬ç”¨æˆ¶éœ€æ±‚
â”‚   â”œâ”€â”€ è‡ªå‹•åŒ–ç¹ç‘£æ“ä½œ
â”‚   â””â”€â”€ å€‹æ€§åŒ–å‘ˆç¾
â”œâ”€â”€ å›æ‡‰æ€§(Responsiveness)
â”‚   â”œâ”€â”€ å³æ™‚åé¥‹
â”‚   â”œâ”€â”€ æµæš¢å‹•ç•«
â”‚   â””â”€â”€ å¿«é€Ÿè¼‰å…¥
â””â”€â”€ åŒ…å®¹æ€§(Inclusivity)
    â”œâ”€â”€ ç„¡éšœç¤™è¨­è¨ˆ
    â”œâ”€â”€ å¤šèªè¨€æ”¯æŒ
    â””â”€â”€ è·¨è¨­å‚™é«”é©—ä¸€è‡´
```

---

## äºŒã€ä»‹é¢æ¶æ§‹è¨­è¨ˆ

### 2.1 æ•´é«”è³‡è¨Šæ¶æ§‹

```
æ‡‰ç”¨ç¨‹å¼æ¶æ§‹
â”œâ”€â”€ ğŸ  é¦–é å„€è¡¨æ¿(Home Dashboard)
â”‚   â”œâ”€â”€ æ™ºèƒ½å•å€™èª(æ™‚æ®µæ„ŸçŸ¥)
â”‚   â”œâ”€â”€ ä»Šæ—¥æ´»å‹•å»ºè­°å¡ç‰‡
â”‚   â”œâ”€â”€ å¿«é€Ÿå°è©±å…¥å£
â”‚   â”œâ”€â”€ å­©å­é€²åº¦å¿«è¦½
â”‚   â””â”€â”€ æƒ…å¢ƒæ„ŸçŸ¥å¿«æ·éµ
â”œâ”€â”€ ğŸ’¬ AI å°è©±ä¸­å¿ƒ(Chat Hub)
â”‚   â”œâ”€â”€ å°è©±å¼äº’å‹•ä¸»ä»‹é¢
â”‚   â”œâ”€â”€ èªéŸ³/æ–‡å­—/åœ–ç‰‡è¼¸å…¥
â”‚   â”œâ”€â”€ æ™ºèƒ½å»ºè­°æ°£æ³¡
â”‚   â””â”€â”€ å°è©±æ­·å²èˆ‡æ›¸ç±¤
â”œâ”€â”€ ğŸ¯ æ´»å‹•æ¢ç´¢(Activity Explorer)
â”‚   â”œâ”€â”€ æ™ºèƒ½æ¨è–¦æµ
â”‚   â”œâ”€â”€ åˆ†é¡ç€è¦½
â”‚   â”œâ”€â”€ æœå°‹èˆ‡ç¯©é¸
â”‚   â””â”€â”€ æ”¶è—èˆ‡è¨ˆç•«
â”œâ”€â”€ ğŸ“Š æˆé•·å„€è¡¨æ¿(Growth Dashboard)
â”‚   â”œâ”€â”€ è¦–è¦ºåŒ–ç™¼å±•é€²åº¦
â”‚   â”œâ”€â”€ é‡Œç¨‹ç¢‘æ™‚é–“è»¸
â”‚   â”œâ”€â”€ AI æ´å¯Ÿå ±å‘Š
â”‚   â””â”€â”€ ç…§ç‰‡è¨˜æ†¶ç‰†
â”œâ”€â”€ ğŸ‘¥ ç¤¾ç¾¤ç©ºé–“(Community)
â”‚   â”œâ”€â”€ è©±é¡Œè¨è«–å€
â”‚   â”œâ”€â”€ ç¶“é©—åˆ†äº«
â”‚   â”œâ”€â”€ å°ˆå®¶å•ç­”
â”‚   â””â”€â”€ æ´»å‹•æ‰“å¡
â””â”€â”€ âš™ï¸ å€‹äººåŒ–è¨­å®š(Settings)
    â”œâ”€â”€ å®¶åº­æª”æ¡ˆç®¡ç†
    â”œâ”€â”€ é€šçŸ¥åå¥½
    â”œâ”€â”€ éš±ç§æ§åˆ¶
    â””â”€â”€ è¨‚é–±ç®¡ç†
```

### 2.2 é¦–é å„€è¡¨æ¿è¨­è¨ˆ

#### è¦–è¦ºè¨­è¨ˆæ¦‚å¿µ

```
é¦–é ä½ˆå±€(éŸ¿æ‡‰å¼è¨­è¨ˆ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜€ï¸ æ—©å®‰,åª½å’ª!             ğŸ””ğŸ“±âš™ï¸  â”‚
â”‚  ä»Šå¤©æ˜¯ç¾å¥½çš„é€±äº”,è‰¾ç‘ªçœ‹èµ·ä¾†ç²¾ç¥é£½æ»¿ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ¯ ç‚ºæ‚¨æ¨è–¦ - ä»Šæ—¥æ™¨é–“æ´»å‹•              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ³ æ—©é¤å°å»šå¸«                    â”‚  â”‚
â”‚  â”‚ â±ï¸ 15åˆ†é˜ | ğŸ·ï¸ æ•¸å­¸+ç”Ÿæ´»æŠ€èƒ½    â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ è®“è‰¾ç‘ªåƒèˆ‡æº–å‚™æ—©é¤,ç·´ç¿’è¨ˆæ•¸      â”‚  â”‚
â”‚  â”‚ å’Œåˆ†é¡,åŸ¹é¤Šç¨ç«‹æ€§               â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ [â–¶ï¸ é–‹å§‹æ´»å‹•]  [â­ ç¨å¾Œåš]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  ğŸ’¬ å¿«é€Ÿè©¢å• AI æ•™ç·´                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤ "å­©å­æ—©ä¸Šæ‹–æ‹–æ‹‰æ‹‰æ€éº¼è¾¦?"    â”‚  â”‚
â”‚  â”‚                            [ğŸ¤] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  ğŸ“ˆ æœ¬é€±äº®é»                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å®Œæˆ     â”‚ â”‚ æ–°æŠ€èƒ½   â”‚ â”‚ åƒèˆ‡åº¦ â”‚ â”‚
â”‚  â”‚ 12æ´»å‹•   â”‚ â”‚ åˆ†äº«+1  â”‚ â”‚ â­â­â­â­ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  ğŸŒŸ ä»Šæ—¥ç‰¹åˆ¥                            â”‚
â”‚  "è‰¾ç‘ªä»Šå¤©ç¬¬ä¸€æ¬¡è‡ªå·±ç©¿å¥½è¥ªå­!"          â”‚
â”‚  [ğŸ“¸ è¨˜éŒ„æ™‚åˆ»]  [ğŸ‰ æ…¶ç¥]              â”‚
â”‚                                         â”‚
â”‚  ğŸ”„ ç¹¼çºŒæ˜¨å¤©çš„æ´»å‹•                      â”‚
â”‚  â€¢ å½©è™¹é¡è‰²å°‹å¯¶(é‚„å·®3å€‹é¡è‰²)            â”‚
â”‚  â€¢ ç¡å‰æ•…äº‹æ¥é¾                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   [ğŸ ]  [ğŸ’¬]  [ğŸ¯]  [ğŸ“Š]  [ğŸ‘¤]
  é¦–é    å°è©±   æ´»å‹•   æˆé•·   æˆ‘çš„
```

#### äº’å‹•è¨­è¨ˆç´°ç¯€

**æ™ºèƒ½å•å€™èªç³»çµ±:**
```javascript
// æ™‚æ®µèˆ‡æƒ…å¢ƒæ„ŸçŸ¥å•å€™
function generateGreeting(time, userData, childStatus) {
    const hour = time.getHours();
    const dayOfWeek = time.getDay();
    const weather = getWeatherData();
    const childMood = childStatus.currentMood;
    
    let greeting = "";
    let emoji = "";
    let contextualSuggestion = "";
    
    // æ™‚æ®µåˆ¤æ–·
    if (hour >= 6 && hour < 9) {
        emoji = "â˜€ï¸";
        greeting = `æ—©å®‰,${userData.preferredName}!`;
        contextualSuggestion = "æ™¨é–“æ˜¯å»ºç«‹ä¾‹è¡Œçš„å¥½æ™‚å…‰";
    } else if (hour >= 9 && hour < 12) {
        emoji = "ğŸŒ¤ï¸";
        greeting = `ä¸Šåˆå¥½,${userData.preferredName}!`;
        contextualSuggestion = "ç¾åœ¨æ˜¯æ¢ç´¢å­¸ç¿’çš„é»ƒé‡‘æ™‚æ®µ";
    } else if (hour >= 12 && hour < 14) {
        emoji = "ğŸ½ï¸";
        greeting = `åˆå®‰,${userData.preferredName}!`;
        contextualSuggestion = "åˆé¤æ™‚å…‰ä¹Ÿèƒ½å¯“æ•™æ–¼æ¨‚";
    } else if (hour >= 14 && hour < 17) {
        emoji = "ğŸŒˆ";
        greeting = `ä¸‹åˆå¥½,${userData.preferredName}!`;
        contextualSuggestion = "é©åˆè¦ªå­äº’å‹•çš„æ™‚å…‰";
    } else if (hour >= 17 && hour < 20) {
        emoji = "ğŸŒ†";
        greeting = `å‚æ™šå¥½,${userData.preferredName}!`;
        contextualSuggestion = "æ™šé¤æº–å‚™æ™‚åˆ»,è®“å­©å­åƒèˆ‡å§";
    } else {
        emoji = "ğŸŒ™";
        greeting = `æ™šå®‰,${userData.preferredName}!`;
        contextualSuggestion = "ç¡å‰æ˜¯çè²´çš„é€£çµæ™‚å…‰";
    }
    
    // é€±äº”ç‰¹åˆ¥å•å€™
    if (dayOfWeek === 5) {
        greeting += " ä»Šå¤©æ˜¯ç¾å¥½çš„é€±äº”!";
    }
    
    // å¤©æ°£æ•´åˆ
    if (weather.condition === "rainy") {
        contextualSuggestion += ",é›¨å¤©æœ‰ç‰¹åˆ¥çš„å®¤å…§æ´»å‹•å–”";
    }
    
    // å­©å­ç‹€æ…‹æ•´åˆ
    if (childMood === "energetic") {
        greeting += ` ${userData.childName}çœ‹èµ·ä¾†ç²¾ç¥é£½æ»¿`;
    } else if (childMood === "tired") {
        greeting += ` ${userData.childName}å¯èƒ½éœ€è¦å®‰éœæ´»å‹•`;
    }
    
    return {
        emoji: emoji,
        greeting: greeting,
        suggestion: contextualSuggestion
    };
}
```

**æ´»å‹•æ¨è–¦å¡ç‰‡è¨­è¨ˆ:**

æ¯å¼µå¡ç‰‡åŒ…å«:
- **è¦–è¦ºå¸å¼•åŠ›**: æ´»å‹•ç›¸é—œçš„ç²¾ç¾æ’åœ–æˆ–ç…§ç‰‡
- **å¿«é€Ÿè³‡è¨Š**: ä¸€çœ¼çœ‹æ‡‚æ™‚é•·ã€é©åˆå¹´é½¡ã€æŠ€èƒ½æ¨™ç±¤
- **å€‹äººåŒ–ç†ç”±**: "ç‚ºä»€éº¼æ¨è–¦çµ¦æ‚¨"çš„ç°¡çŸ­èªªæ˜
- **å³æ™‚è¡Œå‹•**: ä¸€éµé–‹å§‹æˆ–åŠ å…¥è¨ˆç•«
- **äº’å‹•åé¥‹**: æ”¶è—ã€åˆ†äº«ã€ä¸æ„Ÿèˆˆè¶£

```jsx
// React æ´»å‹•å¡ç‰‡çµ„ä»¶ç¯„ä¾‹
function ActivityCard({ activity, childProfile, onStart, onSaveLater }) {
    const [isExpanded, setIsExpanded] = useState(false);
    
    return (
        <div className="activity-card" 
             onClick={() => setIsExpanded(!isExpanded)}>
            {/* è¦–è¦ºé ­åœ– */}
            <div className="card-image">
                <img src={activity.imageUrl} alt={activity.title} />
                <div className="quick-tags">
                    <span className="time-tag">â±ï¸ {activity.duration}åˆ†é˜</span>
                    <span className="skill-tag">ğŸ·ï¸ {activity.primarySkills.join('+')}</span>
                </div>
            </div>
            
            {/* å…§å®¹å€åŸŸ */}
            <div className="card-content">
                <h3>{activity.emoji} {activity.title}</h3>
                <p className="description">{activity.shortDescription}</p>
                
                {/* å€‹äººåŒ–æ¨è–¦ç†ç”± */}
                <div className="why-recommended">
                    <span className="ai-badge">âœ¨ AIæ¨è–¦</span>
                    <p>{activity.recommendationReason}</p>
                </div>
                
                {/* å±•é–‹æ›´å¤šç´°ç¯€ */}
                {isExpanded && (
                    <div className="expanded-details">
                        <div className="materials">
                            <strong>éœ€è¦ææ–™:</strong>
                            <ul>
                                {activity.materials.map(m => <li key={m}>{m}</li>)}
                            </ul>
                        </div>
                        <div className="learning-goals">
                            <strong>å­¸ç¿’ç›®æ¨™:</strong>
                            <p>{activity.learningGoals.join(', ')}</p>
                        </div>
                    </div>
                )}
                
                {/* è¡Œå‹•æŒ‰éˆ• */}
                <div className="card-actions">
                    <button className="primary-btn" onClick={() => onStart(activity)}>
                        â–¶ï¸ é–‹å§‹æ´»å‹•
                    </button>
                    <button className="secondary-btn" onClick={() => onSaveLater(activity)}>
                        â­ ç¨å¾Œåš
                    </button>
                    <button className="icon-btn">
                        <Share2 size={18} />
                    </button>
                </div>
            </div>
        </div>
    );
}
```

---

## ä¸‰ã€AI å°è©±ä»‹é¢è¨­è¨ˆ

### 3.1 å°è©±ä¸­å¿ƒè¦–è¦ºè¨­è¨ˆ

```
AIå°è©±ä»‹é¢ä½ˆå±€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† AIè‚²å…’æ•™ç·´                    â‹®  â”‚
â”‚  ğŸ¤– å°æ™ºæ­£åœ¨è†è½...                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å—¨!æˆ‘æ˜¯å°æ™º,æ‚¨çš„è‚²å…’å¤¥ä¼´ ğŸ˜Š  â”‚ â”‚
â”‚  â”‚ æœ‰ä»€éº¼æˆ‘å¯ä»¥å¹«å¿™çš„å—?         â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚ [ğŸ¯ æ´»å‹•å»ºè­°] [ğŸ’¡ æ•™é¤Šå›°æ“¾]  â”‚ â”‚
â”‚  â”‚ [ğŸ“Š ç™¼å±•è©•ä¼°] [â“ å¿«é€Ÿå•ç­”]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â¬†ï¸ â”‚
â”‚                            AIå›æ‡‰   â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æˆ‘å¥³å…’æœ€è¿‘ä¸æ„›åƒé£¯,          â”‚ â”‚
â”‚  â”‚ æ¯æ¬¡éƒ½è¦è¿½è‘—é¤µ,æ€éº¼è¾¦?       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â¬†ï¸                     ç”¨æˆ¶è¨Šæ¯   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æˆ‘ç†è§£æ‚¨çš„å›°æ“¾,ç”¨é¤æ™‚å…‰çš„ç¢º  â”‚ â”‚
â”‚  â”‚ å¸¸å¸¸å……æ»¿æŒ‘æˆ° ğŸ’™              â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚ è®“æˆ‘å…ˆäº†è§£ä¸€ä¸‹æƒ…æ³:           â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚ [ğŸ“ å¥³å…’å¹¾æ­²å‘¢?]              â”‚ â”‚
â”‚  â”‚ â€¢ 1-2æ­²                       â”‚ â”‚
â”‚  â”‚ â€¢ 2-3æ­²                       â”‚ â”‚
â”‚  â”‚ â€¢ 3-4æ­²                       â”‚ â”‚
â”‚  â”‚ â€¢ 4-5æ­²                       â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚ æˆ–è€…ç›´æ¥å‘Šè¨´æˆ‘æ›´å¤šç´°ç¯€ ğŸ‘‡     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¬ğŸ“·  â”‚
â”‚  è¼¸å…¥è¨Šæ¯...              [ç™¼é€]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å¤šæ¨¡æ…‹è¼¸å…¥è¨­è¨ˆ

#### A. æ–‡å­—è¼¸å…¥

**æ™ºèƒ½è¼¸å…¥æ¡†ç‰¹æ€§:**
```javascript
// æ™ºèƒ½è¼¸å…¥åŠ©æ‰‹
class SmartInputAssistant {
    constructor() {
        this.suggestions = [];
        this.context = null;
    }
    
    // å³æ™‚å»ºè­°
    onTyping(text) {
        // åµæ¸¬æ„åœ–ä¸¦æä¾›å¿«æ·å»ºè­°
        if (text.includes("æ´»å‹•")) {
            this.showSuggestions([
                "ğŸ’¡ æ¨è–¦é©åˆç¾åœ¨çš„æ´»å‹•",
                "ğŸ¯ æ‰¾ç‰¹å®šæŠ€èƒ½çš„æ´»å‹•",
                "â° 10åˆ†é˜å¿«é€Ÿæ´»å‹•"
            ]);
        } else if (text.includes("ä¸") || text.includes("æ€éº¼è¾¦")) {
            this.showSuggestions([
                "ğŸ“ è©³ç´°æè¿°æƒ…æ³",
                "ğŸ¤ ç”¨èªéŸ³èªªæ˜",
                "ğŸ“Š æª¢è¦–ç›¸é—œæ–‡ç« "
            ]);
        }
        
        // è‡ªå‹•å®Œæˆå¸¸è¦‹å•é¡Œ
        this.autoCompleteCommonQuestions(text);
    }
    
    // æ™ºèƒ½æ ¼å¼åŒ–
    formatMessage(text) {
        // è‡ªå‹•æ–·è¡Œã€è¡¨æƒ…ç¬¦è™Ÿå»ºè­°ç­‰
        return formatted;
    }
    
    // æƒ…å¢ƒæ„ŸçŸ¥å»ºè­°
    getContextualPrompts() {
        const time = new Date().getHours();
        const location = this.context.location;
        
        if (time >= 7 && time < 9 && location === "home") {
            return [
                "æ—©é¤æ™‚å¯ä»¥åšä»€éº¼?",
                "å¦‚ä½•è®“å­©å­ä¸»å‹•ç©¿è¡£æœ?",
                "æ™¨é–“ä¾‹è¡Œå»ºç«‹æŠ€å·§"
            ];
        }
        // ... æ›´å¤šæƒ…å¢ƒ
    }
}
```

**è¼¸å…¥æ¡†å¢å¼·åŠŸèƒ½:**
- **æ™ºèƒ½å»ºè­°**: æ ¹æ“šè¼¸å…¥è‡ªå‹•æç¤ºå®Œæ•´å•é¡Œ
- **å¿«æ·æŒ‡ä»¤**: æ”¯æ´ "/æ´»å‹•"ã€"/è©•ä¼°" ç­‰å¿«é€Ÿå‘½ä»¤
- **è¡¨æƒ…ç¬¦è™Ÿ**: å¿«é€Ÿæ’å…¥ç›¸é—œè¡¨æƒ…ç¬¦è™Ÿ
- **èªæ°£èª¿æ•´**: å¯é¸æ“‡å°è©±é¢¨æ ¼(ç°¡æ½”/è©³ç´°/æº«æš–)

#### B. èªéŸ³è¼¸å…¥

```
èªéŸ³äº’å‹•æµç¨‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€…é»æ“Šéº¥å…‹é¢¨æŒ‰éˆ•        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¦–è¦ºåé¥‹:æ³¢å½¢å‹•ç•«          â”‚
â”‚  ğŸ¤ â—â—‹â—â—‹â—â—‹â—                â”‚
â”‚  "æ­£åœ¨è†è½..."              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å³æ™‚èªéŸ³è½‰æ–‡å­—              â”‚
â”‚  é¡¯ç¤ºè­˜åˆ¥ä¸­çš„æ–‡å­—            â”‚
â”‚  "æˆ‘çš„å­©å­æœ€è¿‘..."          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¢ºèªæˆ–ç·¨è¼¯                  â”‚
â”‚  [âœ“ ç¢ºèª]  [âœï¸ ç·¨è¼¯]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AIè™•ç†ä¸¦å›æ‡‰                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**èªéŸ³äº’å‹•ç‰¹è‰²:**
```javascript
// èªéŸ³åŠ©æ‰‹è¨­è¨ˆ
class VoiceAssistant {
    constructor() {
        this.isListening = false;
        this.recognition = new SpeechRecognition();
        this.synthesis = new SpeechSynthesis();
    }
    
    // é–‹å§‹èªéŸ³è¼¸å…¥
    startListening() {
        this.isListening = true;
        
        // è¦–è¦ºåé¥‹
        this.showWaveformAnimation();
        this.showHint("æ­£åœ¨è†è½,è«‹èªªè©±...");
        
        // èªéŸ³è­˜åˆ¥
        this.recognition.start();
        
        // å³æ™‚è½‰æ–‡å­—é¡¯ç¤º
        this.recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            this.displayTranscript(transcript);
        };
        
        // è¶…æ™‚è™•ç†
        setTimeout(() => {
            if (this.isListening) {
                this.showHint("æ²’è½åˆ°è²éŸ³,è¦é‡æ–°èªªä¸€æ¬¡å—?");
            }
        }, 10000);
    }
    
    // èªéŸ³å›æ‡‰(å¯é¸åŠŸèƒ½)
    speakResponse(text) {
        if (this.userSettings.voiceResponseEnabled) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-TW';
            utterance.rate = 0.9; // ç¨æ…¢,æ›´æ¸…æ¥š
            utterance.pitch = 1.1; // ç¨é«˜,æ›´å‹å–„
            
            this.synthesis.speak(utterance);
            
            // åŒæ­¥é¡¯ç¤ºæ–‡å­—èˆ‡èªéŸ³é«˜äº®
            this.highlightSpokenText(text);
        }
    }
    
    // å…æŒæ¨¡å¼(åª½åª½åœ¨åšé£¯æ™‚)
    enableHandsFreeMode() {
        this.continuousListening = true;
        this.wakeWord = "å°æ™º"; // å–šé†’è©
        
        // æŒçºŒç›£è½å–šé†’è©
        this.listenForWakeWord();
    }
}
```

**èªéŸ³äº’å‹•å„ªå‹¢:**
- **è§£æ”¾é›™æ‰‹**: åª½åª½åœ¨åšé£¯ã€æ´—è¡£æ™‚ä¹Ÿèƒ½è«®è©¢
- **æ›´è‡ªç„¶**: èªªè©±æ¯”æ‰“å­—æ›´å¿«ã€æ›´è‡ªç„¶
- **æƒ…ç·’å‚³é**: å¯ä»¥è½å‡ºç„¦æ…®ã€ç–²æ†Šç­‰æƒ…ç·’
- **è¦ªå­åŒç”¨**: å­©å­ä¹Ÿå¯ä»¥ç”¨èªéŸ³äº’å‹•(æœ‰è¶£çš„é«”é©—)

#### C. åœ–ç‰‡è¼¸å…¥

```
åœ–ç‰‡äº’å‹•å ´æ™¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡                â”‚
â”‚  ğŸ“· [é¸æ“‡ç…§ç‰‡]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI è¦–è¦ºåˆ†æ                â”‚
â”‚  â€¢ è¾¨è­˜ç‰©é«”/å ´æ™¯            â”‚
â”‚  â€¢ ç†è§£æƒ…å¢ƒ                  â”‚
â”‚  â€¢ ç”Ÿæˆç›¸é—œå»ºè­°              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ™ºèƒ½å›æ‡‰                    â”‚
â”‚  âœ“ æ´»å‹•å»ºè­°                  â”‚
â”‚  âœ“ å®‰å…¨æé†’                  â”‚
â”‚  âœ“ å»¶ä¼¸æƒ³æ³•                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åœ–ç‰‡è¼¸å…¥æ‡‰ç”¨å ´æ™¯:**

**å ´æ™¯ä¸€: ææ–™è­˜åˆ¥**
```
ç”¨æˆ¶ä¸Šå‚³: [ä¸€å †å®¶ä¸­é›¶æ•£ç©å…·çš„ç…§ç‰‡]
AIåˆ†æ: 
- è­˜åˆ¥å‡º: ç©æœ¨ã€å½©è‰²ç­†ã€å‰ªåˆ€ã€ç´™å¼µã€æ¯›ç·š
- 
å›æ‡‰: "å¤ªæ£’äº†!ç”¨é€™äº›ææ–™æˆ‘å€‘å¯ä»¥åš:
  1. ğŸ¨ å‰µæ„æ‹¼è²¼ç•«(20åˆ†é˜,è—è¡“+ç²¾ç´°å‹•ä½œ)
  2. ğŸ—ï¸ ç©æœ¨å·¥ç¨‹æŒ‘æˆ°(30åˆ†é˜,ç©ºé–“+å•é¡Œè§£æ±º)
  3. ğŸ§¶ æ¯›ç·šè—è¡“(15åˆ†é˜,ç²¾ç´°å‹•ä½œ+å‰µæ„)
  
  å“ªä¸€å€‹è‰¾ç‘ªæœƒæ¯”è¼ƒå–œæ­¡å‘¢?"
```

**å ´æ™¯äºŒ: ç’°å¢ƒè©•ä¼°**
```
ç”¨æˆ¶ä¸Šå‚³: [å­©å­æˆ¿é–“ç…§ç‰‡]
AIåˆ†æ:
- ç’°å¢ƒ: æ•´æ½”åº¦ä¸­ç­‰,ç©å…·è¼ƒå¤š
- å®‰å…¨: æ³¨æ„åˆ°æ’åº§æœªè¦†è“‹

å›æ‡‰: "æˆ‘çœ‹åˆ°è‰¾ç‘ªçš„æˆ¿é–“äº†!æœ‰äº›å»ºè­°:
  
  ğŸ¯ æ•´ç†éŠæˆ²: å¯ä»¥è¨­è¨ˆä¸€å€‹ã€Œç©å…·å›å®¶ã€éŠæˆ²,
     åŸ¹é¤Šæ•´ç†ç¿’æ…£(å¯“æ•™æ–¼æ¨‚)
  
  âš ï¸ å®‰å…¨æé†’: å»ºè­°åœ¨åºŠé‚Šçš„æ’åº§åŠ ä¸Šå®‰å…¨è“‹
  
  ğŸ’¡ ç’°å¢ƒå„ªåŒ–: å¯ä»¥è¨­ç½®ä¸€å€‹é–±è®€è§’,
     æ”¾å¹¾å€‹æŠ±æ•å’Œæ›¸ç±,é¼“å‹µè‡ªä¸»é–±è®€"
```

**å ´æ™¯ä¸‰: æˆæœåˆ†äº«**
```
ç”¨æˆ¶ä¸Šå‚³: [å­©å­å®Œæˆçš„ç¹ªç•«ä½œå“]
AIå›æ‡‰: "å“‡!è‰¾ç‘ªçš„ç•«ä½œçœŸæ£’! ğŸ¨
  
  æˆ‘çœ‹åˆ°:
  â€¢ ç”¨äº†6ç¨®é¡è‰²(è‰²å½©èªçŸ¥ç™¼å±•è‰¯å¥½!)
  â€¢ ç·šæ¢æ§åˆ¶è¶Šä¾†è¶Šç©©å®š(ç²¾ç´°å‹•ä½œé€²æ­¥)
  â€¢ æœ‰æ•…äº‹æ€§çš„æ§‹åœ–(æƒ³åƒåŠ›è±å¯Œ)
  
  ğŸ’¬ å°è©±å»ºè­°:
  ã€Œå¯ä»¥è·Ÿåª½åª½èªªèªªé€™å¹…ç•«çš„æ•…äº‹å—?ã€
  ã€Œä½ æœ€å–œæ­¡å“ªå€‹éƒ¨åˆ†?ç‚ºä»€éº¼?ã€
  
  ğŸ“¸ è¦æŠŠé€™å€‹è¨˜éŒ„åˆ°è‰¾ç‘ªçš„æˆé•·ç›¸ç°¿å—?"
```

### 3.3 å°è©±é«”é©—å„ªåŒ–

#### A. å°è©±æ°£æ³¡è¨­è¨ˆ

```css
/* AI å›æ‡‰æ°£æ³¡ */
.ai-message {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 18px 18px 18px 4px;
    padding: 12px 16px;
    max-width: 80%;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    animation: slideInLeft 0.3s ease;
}

/* ç”¨æˆ¶è¨Šæ¯æ°£æ³¡ */
.user-message {
    background: #f0f0f0;
    color: #333;
    border-radius: 18px 18px 4px 18px;
    padding: 12px 16px;
    max-width: 80%;
    margin-left: auto;
    animation: slideInRight 0.3s ease;
}

/* æ‰“å­—ä¸­å‹•ç•« */
.typing-indicator {
    display: flex;
    gap: 4px;
    padding: 12px;
}

.typing-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #667eea;
    animation: typingBounce 1.4s infinite;
}

.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typingBounce {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-10px); }
}
```

#### B. äº’å‹•å¼å›æ‡‰å…ƒç´ 

**å¯é»æ“Šçš„é¸é …æŒ‰éˆ•:**
```jsx
// äº’å‹•å¼é¸é …çµ„ä»¶
function InteractiveOptions({ question, options, onSelect }) {
    return (
        <div className="ai-message">
            <p>{question}</p>
            <div className="option-buttons">
                {options.map((option, index) => (
                    <button 
                        key={index}
                        className="option-btn"
                        onClick={() => onSelect(option)}
                    >
                        {option.emoji} {option.text}
                    </button>
                ))}
            </div>
        </div>
    );
}

// ä½¿ç”¨ç¯„ä¾‹
<InteractiveOptions 
    question="è‰¾ç‘ªç¾åœ¨çš„ç‹€æ…‹å¦‚ä½•?"
    options={[
        { emoji: "ğŸ˜Š", text: "ç²¾åŠ›å……æ²›", value: "energetic" },
        { emoji: "ğŸ˜´", text: "æœ‰é»ç´¯äº†", value: "tired" },
        { emoji: "ğŸ˜¢", text: "æƒ…ç·’ä¸ä½³", value: "upset" },
        { emoji: "ğŸ¤”", text: "é‚„å¥½", value: "neutral" }
    ]}
    onSelect={(option) => handleChildMoodUpdate(option)}
/>
```

**å¡ç‰‡å¼å›æ‡‰:**
```jsx
// æ´»å‹•æ¨è–¦å¡ç‰‡(åœ¨å°è©±ä¸­)
function ActivityCardInChat({ activity }) {
    return (
        <div className="ai-message card-message">
            <p>æ ¹æ“šæ‚¨çš„æƒ…æ³,æˆ‘æ¨è–¦é€™å€‹æ´»å‹•:</p>
            
            <div className="mini-activity-card">
                <div className="card-header">
                    <img src={activity.icon} />
                    <div>
                        <h4>{activity.title}</h4>
                        <span className="duration">{activity.duration}åˆ†é˜</span>
                    </div>
                </div>
                
                <p className="card-description">
                    {activity.shortDesc}
                </p>
                
                <div className="card-tags">
                    {activity.skills.map(skill => (
                        <span className="tag">{skill}</span>
                    ))}
                </div>
                
                <div className="card-actions">
                    <button className="primary">
                        æŸ¥çœ‹è©³æƒ…
                    </button>
                    <button className="secondary">
                        é–‹å§‹æ´»å‹•
                    </button>
                </div>
            </div>
        </div>
    );
}
```

#### C. æƒ…å¢ƒç†è§£èˆ‡è¨˜æ†¶

```javascript
// å°è©±æƒ…å¢ƒç®¡ç†å™¨
class ConversationContextManager {
    constructor() {
        this.shortTermMemory = []; // ç•¶å‰å°è©±
        this.longTermMemory = {}; // ç”¨æˆ¶æ­·å²
        this.currentTopic = null;
        this.pendingQuestions = [];
    }
    
    // è¿½è¹¤å°è©±ä¸»é¡Œ
    trackTopic(message) {
        // AIåˆ†æç•¶å‰è¨è«–çš„ä¸»é¡Œ
        const topic = this.detectTopic(message);
        
        if (topic !== this.currentTopic) {
            // ä¸»é¡Œè½‰æ›
            this.onTopicChange(this.currentTopic, topic);
            this.currentTopic = topic;
        }
    }
    
    // è¨˜ä½é‡è¦è³‡è¨Š
    rememberImportantInfo(conversation) {
        // æå–é—œéµè³‡è¨Š
        const keyInfo = this.extractKeyInformation(conversation);
        
        // ä¾‹å¦‚: "æˆ‘å¥³å…’3æ­²,å–œæ­¡æé¾"
        if (keyInfo.childAge) {
            this.longTermMemory.childAge = keyInfo.childAge;
        }
        if (keyInfo.interests) {
            this.longTermMemory.interests = [
                ...this.longTermMemory.interests,
                ...keyInfo.interests
            ];
        }
        
        // å„²å­˜åˆ°è³‡æ–™åº«
        this.persistToDatabase();
    }
    
    // æä¾›æƒ…å¢ƒåŒ–å›æ‡‰
    getContextualResponse(query) {
        // æª¢æŸ¥æ˜¯å¦æ˜¯å»¶çºŒä¹‹å‰çš„è©±é¡Œ
        if (this.isFollowUp(query)) {
            // åŸºæ–¼ä¸Šä¸‹æ–‡å›æ‡‰
            return this.generateFollowUpResponse(query, this.shortTermMemory);
        } else {
            // æ–°è©±é¡Œ
            return this.generateNewTopicResponse(query);
        }
    }
    
    // æ™ºèƒ½è¿½å•
    generateClarifyingQuestions(userMessage) {
        // å¦‚æœè³‡è¨Šä¸è¶³,ç”Ÿæˆè¿½å•
        const missingInfo = this.identifyMissingInfo(userMessage);
        
        if (missingInfo.length > 0) {
            return {
                type: 'clarification',
                questions: this.formulateQuestions(missingInfo)
            };
        }
        
        return null;
    }
}
```

**å°è©±ç¯„ä¾‹å±•ç¤º:**

```
ç”¨æˆ¶: "æˆ‘å…’å­ä¸æ„›åˆ·ç‰™"

AI: "æˆ‘ç†è§£,å¾ˆå¤šå­©å­éƒ½ä¸å–œæ­¡åˆ·ç‰™ ğŸ˜Š 
     è®“æˆ‘æ›´äº†è§£ä¸€ä¸‹æƒ…æ³:
     
     [ğŸ“ å…’å­å¹¾æ­²å‘¢?]
     â€¢ 1-2æ­²
     â€¢ 2-3æ­²  â† ç”¨æˆ¶é»é¸
     â€¢ 3-4æ­²
     â€¢ 4æ­²ä»¥ä¸Š"

ç”¨æˆ¶: [é¸æ“‡ 2-3æ­²]

AI: "äº†è§£!2-3æ­²çš„å­©å­ç¢ºå¯¦å¸¸å¸¸æŠ—æ‹’åˆ·ç‰™ã€‚
     é€šå¸¸æ˜¯ä»€éº¼æƒ…æ³ä¸‹æœ€å›°é›£?
     
     [é¸æ“‡æ‰€æœ‰ç¬¦åˆçš„]
     â˜ æ—©ä¸Šè¶•æ™‚é–“
     â˜ æ™šä¸Šæƒ³ç¡è¦º
     â˜ ä¸å–œæ­¡ç‰™è†å‘³é“
     â˜ è¦ºå¾—ç„¡èŠ"

ç”¨æˆ¶: [é¸æ“‡ã€Œæ™šä¸Šæƒ³ç¡è¦ºã€å’Œã€Œè¦ºå¾—ç„¡èŠã€]

AI: "å¥½çš„,æˆ‘æ˜ç™½äº†!æ™šä¸Šç–²ç´¯åŠ ä¸Šè¦ºå¾—åˆ·ç‰™ç„¡èŠã€‚
     
     è®“æˆ‘ç‚ºæ‚¨è¨­è¨ˆ3å€‹ç­–ç•¥:
     
     ğŸµ **åˆ·ç‰™æ­Œæ™‚é–“**
     æŠŠåˆ·ç‰™è®Šæˆæ­Œå”±æ™‚é–“,ç”¨å­©å­å–œæ­¡çš„æ—‹å¾‹...
     [æŸ¥çœ‹è©³ç´°æ­¥é©Ÿ]
     
     ğŸ¦· **ç‰™é½’è¶…äººæ•…äº‹**
     å‰µé€ ä¸€å€‹ã€Œå°æŠ—è›€ç‰™æ€ªç¸ã€çš„æ•…äº‹...
     [æŸ¥çœ‹è©³ç´°æ­¥é©Ÿ]
     
     â° **ææ—©é–‹å§‹,éŠæˆ²åŒ–**
     ç¡å‰30åˆ†é˜é–‹å§‹,è®“å­©å­é¸æ“‡...
     [æŸ¥çœ‹è©³ç´°æ­¥é©Ÿ]
     
     æ‚¨æƒ³å…ˆè©¦è©¦å“ªä¸€å€‹å‘¢?"
```

---

æˆ‘å°‡ç¹¼çºŒç‚ºæ‚¨è©³ç´°èªªæ˜:
- **æ´»å‹•æ¢ç´¢ä»‹é¢è¨­è¨ˆ**
- **æˆé•·å„€è¡¨æ¿è¦–è¦ºåŒ–**
- **å…’ç«¥å°ˆå±¬äº’å‹•ä»‹é¢**
- **æŠ€è¡“å¯¦ç¾æ¶æ§‹**

æ‚¨æƒ³å…ˆçœ‹å“ªå€‹éƒ¨åˆ†å‘¢?æˆ–è€…å°ç›®å‰çš„å°è©±ä»‹é¢è¨­è¨ˆæœ‰ä»»ä½•å•é¡Œ?
